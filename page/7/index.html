<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>Hexo</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">





<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">
<link rel="stylesheet" href="/css/style.css">


    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">
    

    
    
    
    <style>body>.navbar,body>.section,body>.footer{opacity: 0}</style>
    

    
    
    
    


    
    

    
    
    
    

    
    
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
<style>
.pace {
  -webkit-pointer-events: none;
  pointer-events: none;

  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
}

.pace-inactive {
  display: none;
}

.pace .pace-progress {
  background: #3273dc;
  position: fixed;
  z-index: 2000;
  top: 0;
  right: 100%;
  width: 100%;
  height: 2px;
}
</style>

    


</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">Home</a>
                
                <a class="navbar-item" href="/archives">Archives</a>
                
                <a class="navbar-item" href="/categories">Categories</a>
                
                <a class="navbar-item" href="/tags">Tags</a>
                
                <a class="navbar-item" href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="http://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-08T04:41:39.000Z">2017-06-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/JavaWeb/">JavaWeb</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    9 minutes read (About 1282 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/08/JavaWeb基础之JSP标签/">JavaWeb基础之JSP标签</a>
            
        </h1>
        <div class="content">
            <blockquote>
<p>标签的作用是用来替换jsp脚本，将脚本封装在类里面。</p>
</blockquote>
<h2 id="1-内置标签"><a href="#1-内置标签" class="headerlink" title="1.内置标签"></a>1.内置标签</h2><blockquote>
<p>也称动作标签，不需要在jsp页面导入，分为转发标签，参数标签，包含标签，具体使用语法如下：</p>
</blockquote>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--转发标签和参数标签</span><br><span class="line">&lt;jsp:forward page=&quot;forward.jsp&quot;&gt;</span><br><span class="line">	&lt;jsp:param value=&quot;jacky&quot; name=&quot;name&quot;/&gt;</span><br><span class="line">	&lt;jsp:param value=&quot;123456&quot; name=&quot;password&quot;/&gt;</span><br><span class="line">&lt;/jsp:forward&gt;</span><br><span class="line">--%&gt;</span><br><span class="line">  </span><br><span class="line">&lt;%--包含标签 --%&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">&lt;jsp:include page=&quot;/common/header.jsp&quot;&gt;</span><br><span class="line">	&lt;jsp:param value=&quot;lucy&quot; name=&quot;name&quot;/&gt;</span><br><span class="line">&lt;/jsp:include&gt;</span><br><span class="line">--%&gt;</span><br></pre></td></tr></table></figure>
<p>注意：这里面的包含标签称为动态包含，而前面讲的jsp指定中的include指定为静态包含。两者区分如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-a89524d86687259a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h2 id="2-jstl标签"><a href="#2-jstl标签" class="headerlink" title="2.jstl标签"></a>2.jstl标签</h2><blockquote>
<p><strong>JSTL (全名:Java Standard Tag Library   -java标准标签库 )</strong><br>包括：<br>核心标签库 （c标签库） 天天用<br>国际化标签（fmt标签库）<br>EL函数库（fn函数库）<br>xml标签库（x标签库）<br>sql标签库（sql标签库）</p>
</blockquote>
<p><strong>使用JSTL标签步骤</strong><br>1） 导入jstl支持的jar包（标签背后隐藏的java代码）<br>    注意：使用javaee5.0的项目自动导入jstl支持jar包<br>2）使用taglib指令导入标签库<br>    &lt;%@taglib uri=”tld文件的uri名称” prefix=”简写” %&gt;<br>3）在jsp中使用标签        </p>
<p><strong>核心标签库的重点标签：</strong><br>1.保存数据：<br>    <strong>&lt;c:set&gt;&lt;/c:set&gt;   </strong><br>2.获取数据：<br>  <strong>  &lt;c:out value=””&gt;&lt;/c:out&gt;</strong><br>3.单条件判断<br>        <strong>    &lt;c:if test=””&gt;&lt;/c:if&gt;</strong><br>4.多条件判断<br>         <strong> &lt;c:choose&gt;&lt;/c:choose&gt;</strong><br>          <strong>&lt;c:when test=””&gt;&lt;/c:when&gt;</strong><br>      <strong>    &lt;c:otherwise&gt;&lt;/c:otherwise&gt;</strong><br>5.循环数据<br>         <strong> &lt;c:forEach&gt;&lt;/c:forEach&gt;</strong><br>        <strong>  &lt;c:forTokens items=”” delims=””&gt;&lt;/c:forTokens&gt;</strong><br>5.重定向<br>         <strong> &lt;c:redirect&gt;&lt;/c:redirect&gt;</strong></p>
<p>实例：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*,gz.itcast.b_entity.*&quot; pageEncoding=&quot;utf-8&quot;%&gt;</span><br><span class="line">&lt;%--导入标签库 --%&gt;</span><br><span class="line">&lt;%@taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;</span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt; </span><br><span class="line">    &lt;title&gt;核心标签库&lt;/title&gt;  </span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;%--使用标签 --%&gt;</span><br><span class="line">    &lt;%--set标签 :保存数据(保存到域中)默认保存到page域 --%&gt;</span><br><span class="line">    &lt;c:set var=&quot;name&quot; value=&quot;rose&quot; scope=&quot;request&quot;&gt;&lt;/c:set&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;%</span><br><span class="line">    	String msg = null;</span><br><span class="line">    	pageContext.setAttribute(&quot;msg&quot;,msg);</span><br><span class="line">     %&gt;</span><br><span class="line">    </span><br><span class="line">    $&#123;msg &#125;</span><br><span class="line">    &lt;br/&gt;</span><br><span class="line">    &lt;%--out标签： 获取数据（从域中） </span><br><span class="line">    default： 当value值为null时，使用默认值</span><br><span class="line">    escapeXml: 是否对value值进行转义，false，不转义，true，转义（默认）</span><br><span class="line">    --%&gt;</span><br><span class="line">    &lt;c:out value=&quot;$&#123;msg&#125;&quot; default=&quot;&lt;h3&gt;标题3&lt;/h3&gt;&quot; escapeXml=&quot;true&quot;&gt;&lt;/c:out&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;%--if标签 ：单条件判断--%&gt;</span><br><span class="line">    &lt;c:if test=&quot;$&#123;!empty msg&#125;&quot;&gt;</span><br><span class="line">    	条件成立</span><br><span class="line">    &lt;/c:if&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;%--choose标签+when标签+otherwirse标签: 多条件判断 --%&gt;</span><br><span class="line">    &lt;c:set var=&quot;score&quot; value=&quot;56&quot;&gt;&lt;/c:set&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;c:choose&gt;</span><br><span class="line">    	&lt;c:when test=&quot;$&#123;score&gt;=90 &amp;&amp; score&lt;=100&#125;&quot;&gt;</span><br><span class="line">    		优秀</span><br><span class="line">    	&lt;/c:when&gt;</span><br><span class="line">    	&lt;c:when test=&quot;$&#123;score&gt;=80 &amp;&amp; score&lt;90&#125;&quot;&gt;</span><br><span class="line">    		良好</span><br><span class="line">    	&lt;/c:when&gt;</span><br><span class="line">    	&lt;c:when test=&quot;$&#123;score&gt;=70 &amp;&amp; score&lt;80&#125;&quot;&gt;</span><br><span class="line">    		一般</span><br><span class="line">    	&lt;/c:when&gt;</span><br><span class="line">    	&lt;c:when test=&quot;$&#123;score&gt;=60 &amp;&amp; score&lt;70&#125;&quot;&gt;</span><br><span class="line">    		及格</span><br><span class="line">    	&lt;/c:when&gt;</span><br><span class="line">    	&lt;c:otherwise&gt;</span><br><span class="line">    		不及格</span><br><span class="line">    	&lt;/c:otherwise&gt;</span><br><span class="line">    &lt;/c:choose&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;%-- forEach标签：循环 --%&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">    	//List</span><br><span class="line">     	List&lt;Student&gt;  list = new ArrayList&lt;Student&gt;();</span><br><span class="line">     	list.add(new Student(&quot;rose&quot;,18));</span><br><span class="line">     	list.add(new Student(&quot;jack&quot;,28));</span><br><span class="line">     	list.add(new Student(&quot;lucy&quot;,38));</span><br><span class="line">     	//放入域中</span><br><span class="line">     	pageContext.setAttribute(&quot;list&quot;,list);</span><br><span class="line">     	</span><br><span class="line">     	//Map</span><br><span class="line">     	Map&lt;String,Student&gt; map = new HashMap&lt;String,Student&gt;();</span><br><span class="line">     	map.put(&quot;100&quot;,new Student(&quot;mark&quot;,20));</span><br><span class="line">     	map.put(&quot;101&quot;,new Student(&quot;maxwell&quot;,30));</span><br><span class="line">     	map.put(&quot;102&quot;,new Student(&quot;narci&quot;,40));</span><br><span class="line">     	//放入域中</span><br><span class="line">     	pageContext.setAttribute(&quot;map&quot;,map);</span><br><span class="line">     %&gt;</span><br><span class="line">     &lt;hr/&gt;</span><br><span class="line">     &lt;%--</span><br><span class="line">      begin=&quot;&quot; : 从哪个元素开始遍历，从0开始.默认从0开始</span><br><span class="line">      end=&quot;&quot;:     到哪个元素结束。默认到最后一个元素</span><br><span class="line">      step=&quot;&quot; ： 步长    (每次加几)  ，默认1</span><br><span class="line">      items=&quot;&quot;： 需要遍历的数据（集合） </span><br><span class="line">      var=&quot;&quot;： 每个元素的名称 </span><br><span class="line">      varStatus=&quot;&quot;： 当前正在遍历元素的状态对象。（count属性：当前位置，从1开始）</span><br><span class="line">      </span><br><span class="line">     --%&gt;</span><br><span class="line">    &lt;c:forEach items=&quot;$&#123;list&#125;&quot; var=&quot;student&quot; varStatus=&quot;varSta&quot;&gt;</span><br><span class="line">    	序号：$&#123;varSta.count&#125; - 姓名：$&#123;student.name &#125; - 年龄：$&#123;student.age&#125;&lt;br/&gt;</span><br><span class="line">    &lt;/c:forEach&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;c:forEach items=&quot;$&#123;map&#125;&quot; var=&quot;entry&quot;&gt;</span><br><span class="line">    	$&#123;entry.key &#125; - 姓名： $&#123;entry.value.name &#125; - 年龄：$&#123;entry.value.age &#125;&lt;br/&gt;</span><br><span class="line">    &lt;/c:forEach&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;%-- forToken标签： 循环特殊字符串 --%&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">    	String str = &quot;java-php-net-平面&quot;;</span><br><span class="line">    	pageContext.setAttribute(&quot;str&quot;,str);</span><br><span class="line">     %&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;c:forTokens items=&quot;$&#123;str&#125;&quot; delims=&quot;-&quot; var=&quot;s&quot;&gt;</span><br><span class="line">    	$&#123;s &#125;&lt;br/&gt;</span><br><span class="line">    &lt;/c:forTokens&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;%--redrict:重定向 --%&gt;</span><br><span class="line">    &lt;c:redirect url=&quot;http://www.baidu.com&quot;&gt;&lt;/c:redirect&gt;</span><br><span class="line">    </span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-自定义标签"><a href="#3-自定义标签" class="headerlink" title="3.自定义标签"></a>3.自定义标签</h2><blockquote>
<p>通过自定义标签，可以个性化的实现一些功能。开发步骤如下：</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-c0db618cdeee46fc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>需求： 通过自定义标签向浏览器输出当前客户的IP地址<br>1）编写一个普通的java类，继承SimpleTagSupport类，叫标签处理器类<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 标签处理器类</span><br><span class="line"> * @author APPle</span><br><span class="line"> * 1）继承SimpleTagSupport</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public class ShowIpTag extends SimpleTagSupport&#123;</span><br><span class="line">	private JspContext context;</span><br><span class="line">	</span><br><span class="line">	/**</span><br><span class="line">	 * 传入pageContext</span><br><span class="line">	 */</span><br><span class="line">	@Override</span><br><span class="line">	public void setJspContext(JspContext pc) &#123;</span><br><span class="line">		this.context = pc;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 2）覆盖doTag方法</span><br><span class="line">	 */</span><br><span class="line">	@Override</span><br><span class="line">	public void doTag() throws JspException, IOException &#123;</span><br><span class="line">		//向浏览器输出客户的ip地址</span><br><span class="line">		PageContext pageContext = (PageContext)context;</span><br><span class="line">		</span><br><span class="line">		HttpServletRequest request = (HttpServletRequest)pageContext.getRequest();</span><br><span class="line">		</span><br><span class="line">		String ip = request.getRemoteHost();</span><br><span class="line">		</span><br><span class="line">		JspWriter out = pageContext.getOut();</span><br><span class="line">		</span><br><span class="line">		out.write(&quot;使用自定义标签输出客户的IP地址：&quot;+ip);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2）在web项目的WEB-INF目录下建立myTag.tld文件，这个tld叫标签库的声明文件。（参考核心标签库的tld文件）<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line"></span><br><span class="line">&lt;taglib xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd&quot;</span><br><span class="line">    version=&quot;2.1&quot;&gt;</span><br><span class="line">  &lt;!-- 标签库的版本 --&gt;</span><br><span class="line">  &lt;tlib-version&gt;1.1&lt;/tlib-version&gt;</span><br><span class="line">  &lt;!-- 标签库前缀 --&gt;</span><br><span class="line">  &lt;short-name&gt;myTag&lt;/short-name&gt;</span><br><span class="line">  &lt;!-- tld文件的唯一标记 --&gt;</span><br><span class="line">  &lt;uri&gt;http://gz.acamy.cn&lt;/uri&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 一个标签的声明 --&gt;</span><br><span class="line">  &lt;tag&gt;</span><br><span class="line">    &lt;!-- 标签名称 --&gt;</span><br><span class="line">    &lt;name&gt;showIp&lt;/name&gt;</span><br><span class="line">    &lt;!-- 标签处理器类的全名 --&gt;</span><br><span class="line">    &lt;tag-class&gt;gz.itcast.a_tag.ShowIpTag&lt;/tag-class&gt;</span><br><span class="line">    &lt;!-- 输出标签体内容格式 --&gt;</span><br><span class="line">    &lt;body-content&gt;scriptless&lt;/body-content&gt;</span><br><span class="line">  &lt;/tag&gt;</span><br><span class="line">&lt;/taglib&gt;</span><br></pre></td></tr></table></figure></p>
<p>3） 在jsp页面的头部导入自定义标签库<br>    <code>&lt;%@taglib uri=&quot;http://gz.acamy.cn&quot; prefix=&quot;myTag&quot;%&gt;</code><br>4） 在jsp中使用自定义标签<br>    <code>&lt;myTag:showIp&gt;&lt;/myTag:showIp&gt;</code></p>
<p>效果如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-843377adfc24e959.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><strong>执行过程</strong>：<br>前提： tomcat服务器启动时，加载到每个web应用，加载每个web应用的WEB-INF目录下的所有文件！！！例如。web.xml, tld文件！！！<br>1）访问01.hellotag.jsp资源<br>2）tomcat服务器把jsp文件翻译成java源文件-&gt;编译class-&gt;构造类对象-&gt;调用_jspService（）方法<br>3）检查jsp文件的taglib指令，是否存在一个名为<a href="http://gz.acamy.cn的tld文件。如果没有，则报错" target="_blank" rel="noopener">http://gz.acamy.cn的tld文件。如果没有，则报错</a><br>4）上一步已经读到myTag.tld文件<br>5）读到<a href="myTag:showIp" target="_blank" rel="noopener">myTag:showIp</a> 到myTag.tld文件中查询是否存在<name>为showIp的<tag>标签<br>6）找到对应的<tag>标签，则读到<tag-class>内容<br>7）得到 cn.acamy.a_tag.ShowIpTag,构造ShowIpTag对象，然后调用ShowIpTag里面的方法</tag-class></tag></tag></name></p>

        </div>
        
        
        
    </div>
</div>





    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-07T15:23:32.000Z">2017-06-07</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/JavaWeb/">JavaWeb</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    13 minutes read (About 1908 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/07/JavaWeb基础之JSP初探/">JavaWeb基础之JSP初探</a>
            
        </h1>
        <div class="content">
            <p>JSP全称是Java Server Pages，它和servle技术一样，都是SUN公司定义的一种用于开发动态web资源的技术，jsp文件相当于在html页面嵌套java代码，即方便排版又为用户提供了动态数据。</p>
<h2 id="1-第一个JSP页面"><a href="#1-第一个JSP页面" class="headerlink" title="1. 第一个JSP页面"></a>1. 第一个JSP页面</h2><blockquote>
<p>如下所示，我们在..WebRoot目录下面定义firstJSP.jsp并写下内容，布置到tomcat服务器后我们就可以像访问静态html页面一样去访问该页面。</p>
</blockquote>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*,java.text.*&quot; pageEncoding=&quot;utf-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt; </span><br><span class="line">    &lt;title&gt;第一个jsp页面&lt;/title&gt;  </span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">    	//写java代码</span><br><span class="line">    	//获取当前时间</span><br><span class="line">    	SimpleDateFormat sdf = new SimpleDateFormat();</span><br><span class="line">    	String curDate = sdf.format(new Date());</span><br><span class="line">    	//输出内容到浏览器</span><br><span class="line">    	//response.getWriter().write(&quot;&quot;);</span><br><span class="line">    	out.write(&quot;当前时间为：&quot;+curDate);</span><br><span class="line">     %&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-84dcc9b1345c0d4a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h2 id="2-JSP页面执行过程"><a href="#2-JSP页面执行过程" class="headerlink" title="2.JSP页面执行过程"></a>2.JSP页面执行过程</h2><blockquote>
<p>我们接下来看下JSP页面是如何编绎嵌套在html里面的代码，并向浏览器输出。<br>首先，tomcat服务器在浏览器每一次访问时就将jsp文件翻译成java文件，并把java文件编绎成class字节码文件，我们在tomcat的work对应项目目录下可以找到这两个文件：</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-ba2c1399a3097ab4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<blockquote>
<p>然后看一下firstJSP_jsp.java里面的内容：</p>
</blockquote>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Generated by the Jasper component of Apache Tomcat</span><br><span class="line"> * Version: Apache Tomcat/7.0.57</span><br><span class="line"> * Generated at: 2017-06-07 11:33:50 UTC</span><br><span class="line"> * Note: The last modified time of this file was set to</span><br><span class="line"> *       the last modified time of the source file after</span><br><span class="line"> *       generation to assist with modification tracking.</span><br><span class="line"> */</span><br><span class="line">package org.apache.jsp;</span><br><span class="line"></span><br><span class="line">import javax.servlet.*;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">import javax.servlet.jsp.*;</span><br><span class="line">import java.util.*;</span><br><span class="line">import java.text.*;</span><br><span class="line"></span><br><span class="line">public final class firstJSP_jsp extends org.apache.jasper.runtime.HttpJspBase</span><br><span class="line">    implements org.apache.jasper.runtime.JspSourceDependent &#123;</span><br><span class="line"></span><br><span class="line">  private static final javax.servlet.jsp.JspFactory _jspxFactory =</span><br><span class="line">          javax.servlet.jsp.JspFactory.getDefaultFactory();</span><br><span class="line"></span><br><span class="line">  private static java.util.Map&lt;java.lang.String,java.lang.Long&gt; _jspx_dependants;</span><br><span class="line"></span><br><span class="line">  private javax.el.ExpressionFactory _el_expressionfactory;</span><br><span class="line">  private org.apache.tomcat.InstanceManager _jsp_instancemanager;</span><br><span class="line"></span><br><span class="line">  public java.util.Map&lt;java.lang.String,java.lang.Long&gt; getDependants() &#123;</span><br><span class="line">    return _jspx_dependants;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public void _jspInit() &#123;</span><br><span class="line">    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();</span><br><span class="line">    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public void _jspDestroy() &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)</span><br><span class="line">        throws java.io.IOException, javax.servlet.ServletException &#123;</span><br><span class="line"></span><br><span class="line">    final javax.servlet.jsp.PageContext pageContext;</span><br><span class="line">    javax.servlet.http.HttpSession session = null;</span><br><span class="line">    final javax.servlet.ServletContext application;</span><br><span class="line">    final javax.servlet.ServletConfig config;</span><br><span class="line">    javax.servlet.jsp.JspWriter out = null;</span><br><span class="line">    final java.lang.Object page = this;</span><br><span class="line">    javax.servlet.jsp.JspWriter _jspx_out = null;</span><br><span class="line">    javax.servlet.jsp.PageContext _jspx_page_context = null;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">      response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br><span class="line">      pageContext = _jspxFactory.getPageContext(this, request, response,</span><br><span class="line">      			null, true, 8192, true);</span><br><span class="line">      _jspx_page_context = pageContext;</span><br><span class="line">      application = pageContext.getServletContext();</span><br><span class="line">      config = pageContext.getServletConfig();</span><br><span class="line">      session = pageContext.getSession();</span><br><span class="line">      out = pageContext.getOut();</span><br><span class="line">      _jspx_out = out;</span><br><span class="line"></span><br><span class="line">      out.write(&quot;\r\n&quot;);</span><br><span class="line">      out.write(&quot;&lt;!DOCTYPE HTML PUBLIC \&quot;-//W3C//DTD HTML 4.01 Transitional//EN\&quot;&gt;\r\n&quot;);</span><br><span class="line">      out.write(&quot;&lt;html&gt;\r\n&quot;);</span><br><span class="line">      out.write(&quot;  &lt;head&gt; \r\n&quot;);</span><br><span class="line">      out.write(&quot;    &lt;title&gt;第一个jsp页面&lt;/title&gt;  \r\n&quot;);</span><br><span class="line">      out.write(&quot;  &lt;/head&gt;\r\n&quot;);</span><br><span class="line">      out.write(&quot;  \r\n&quot;);</span><br><span class="line">      out.write(&quot;  &lt;body&gt;\r\n&quot;);</span><br><span class="line">      out.write(&quot;    &quot;);</span><br><span class="line"></span><br><span class="line">    	//写java代码</span><br><span class="line">    	//获取当前时间</span><br><span class="line">    	SimpleDateFormat sdf = new SimpleDateFormat();</span><br><span class="line">    	String curDate = sdf.format(new Date());</span><br><span class="line">    	//输出内容到浏览器</span><br><span class="line">    	//response.getWriter().write(&quot;&quot;);</span><br><span class="line">    	out.write(&quot;当前时间为：&quot;+curDate);</span><br><span class="line">     </span><br><span class="line">      out.write(&quot;\r\n&quot;);</span><br><span class="line">      out.write(&quot;  &lt;/body&gt;\r\n&quot;);</span><br><span class="line">      out.write(&quot;&lt;/html&gt;\r\n&quot;);</span><br><span class="line">    &#125; catch (java.lang.Throwable t) &#123;</span><br><span class="line">      if (!(t instanceof javax.servlet.jsp.SkipPageException))&#123;</span><br><span class="line">        out = _jspx_out;</span><br><span class="line">        if (out != null &amp;&amp; out.getBufferSize() != 0)</span><br><span class="line">          try &#123;</span><br><span class="line">            if (response.isCommitted()) &#123;</span><br><span class="line">              out.flush();</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              out.clearBuffer();</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; catch (java.io.IOException e) &#123;&#125;</span><br><span class="line">        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);</span><br><span class="line">        else throw new ServletException(t);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">      _jspxFactory.releasePageContext(_jspx_page_context);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>通过上面的源码知道翻译成的java文件是一个HttpJspBase类，查看API可知该类继承于HttpServlet，到此为止我们基本上可以下一个结论：<strong>Jsp就是一个servlet程序</strong><br>当我们每次访问JSP页面时就会执行类里面的_jspService方法，可以看到这个方法包含了JSP页面的所有内容。并且放在一个try代码块里面。<br>同Servlet的生命周期类似，该类的构造方法和_jspInit()方法只在每一次访问时执行，在tomcat服务器重新布署时执行_jspDestroy()方法。</p>
</blockquote>
<p>将JSP页面的执行过程用流程图的形式总结如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-30cd882bc3386a03.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h2 id="3-JSP语法"><a href="#3-JSP语法" class="headerlink" title="3.JSP语法"></a>3.JSP语法</h2><h3 id="3-1-Jsp模板"><a href="#3-1-Jsp模板" class="headerlink" title="3.1 Jsp模板"></a>3.1 Jsp模板</h3><p>jsp页面中的html代码就是jsp的模板</p>
<h3 id="3-2-Jsp表达式"><a href="#3-2-Jsp表达式" class="headerlink" title="3.2 Jsp表达式"></a>3.2 Jsp表达式</h3><p>语法：<strong>&lt;%=变量或表达式%&gt;</strong><br>举例：<br>作用： 向浏览器输出变量的值或表达式计算的结果<br>注意：<br>1）表达式的原理就是翻译成out.print(“变量” );通过该方法向浏览器写出内容<br>2）表达式后面不需要带分号结束。</p>
<h3 id="3-3-Jsp的脚本"><a href="#3-3-Jsp的脚本" class="headerlink" title="3.3 Jsp的脚本"></a>3.3 Jsp的脚本</h3><p>语法：<strong>&lt;%java代码 %&gt;</strong><br>作用： 执行java代码<br>注意：<br>1）原理把脚本中java代码原封不动拷贝到_jspService方法中执行。</p>
<h3 id="3-4-Jsp的声明"><a href="#3-4-Jsp的声明" class="headerlink" title="3.4 Jsp的声明"></a>3.4 Jsp的声明</h3><p>语法：<strong>&lt;%! 变量或方法 %&gt;</strong><br>作用： 声明jsp的变量或方法<br>注意:<br>1）变量翻译成成员变量，方法翻译成成员方法。</p>
<h3 id="3-5-Jsp的注释"><a href="#3-5-Jsp的注释" class="headerlink" title="3.5 Jsp的注释"></a>3.5 Jsp的注释</h3><p>语法： <strong>&lt;%!–  jsp注释  –%&gt;</strong><br>注意;<br>1)html的注释会被翻译和执行。而jsp的注释不能被翻译和执行。</p>
<p>##4 Jsp的三大指令</p>
<h3 id="4-1-include指令"><a href="#4-1-include指令" class="headerlink" title="4.1 include指令"></a>4.1 include指令</h3><p>作用： 在当前页面用于包含其他页面<br>语法： <strong>&lt;%@include file=”common/header.jsp”%&gt;</strong><br>注意：<br>1）原理是把被包含的页面（header.jsp）的内容翻译到包含页面(index.jsp)中,合并成翻译成一个java源文件，再编译运行！！，这种包含叫静态包含（源码包含）<br>2）如果使用静态包含，被包含页面中不需要出现全局的html标签了！！！（如html、head、                        body）</p>
<h3 id="4-2-page指令"><a href="#4-2-page指令" class="headerlink" title="4.2 page指令"></a>4.2 page指令</h3><p>作用： 告诉tomcat服务器如何翻译jsp文件<br>语法：<br>&lt;%@ page<br>language=”java”   –告诉服务器使用什么动态语言来翻译jsp文件<br>import=”java.util.*” –告诉服务器java文件使用什么包,导入包，多个包之间用逗号分割<br>pageEncoding=”utf-8”  –告诉服务器使用什么编码翻译jsp文件（成java文件）<br>contentType=”text/html; charset=utf-8” 服务器发送浏览器的数据类型和内容编码<br>注意：在开发工具中，以后只需要设置pageEncoding即可解决中文乱码问题<br>errorPage:  指定当前jsp页面的错误处理页面。<br>isErorrPage:  指定当前页面是否为错误处理页面。false，不是错误处理页面，则不能使用                                exception内置对象；true，是错误处理页面，可以使用exception内置对象。<br>配置全局的错误处理页面可在web.xml添加如下内容：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 全局错误处理页面配置 --&gt;</span><br><span class="line">&lt;error-page&gt;</span><br><span class="line">	&lt;error-code&gt;500&lt;/error-code&gt;</span><br><span class="line">	&lt;location&gt;/common/500.jsp&lt;/location&gt;</span><br><span class="line">&lt;/error-page&gt;</span><br><span class="line">&lt;error-page&gt;</span><br><span class="line">	&lt;error-code&gt;404&lt;/error-code&gt;</span><br><span class="line">	&lt;location&gt;/common/404.html&lt;/location&gt;</span><br><span class="line">&lt;/error-page&gt;</span><br></pre></td></tr></table></figure></p>
<p>session:  是否开启session功能。false，不能用session内置对象；true，可以使用session内置对象。<br>buffer:  jsp页面的缓存区大小。<br>isELIgnore： 是否忽略EL表达式。<br>%&gt;</p>
<h3 id="4-3-taglib指令"><a href="#4-3-taglib指令" class="headerlink" title="4.3 taglib指令"></a>4.3 taglib指令</h3><blockquote>
<p>Taglib指令用于在JSP页面中导入标签库,后面再看</p>
</blockquote>
<p>##5.JSP基本组成语法实例</p>
<p><strong>header.jsp</strong>:用于测试include指令<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;utf-8&quot;%&gt;</span><br><span class="line">   头部页面的内容</span><br></pre></td></tr></table></figure></p>
<p><strong>script.jsp</strong>:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- page指令  --&gt;</span><br><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;utf-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt; </span><br><span class="line">    &lt;title&gt;Jsp语法&lt;/title&gt;  </span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;!-- include指令  --&gt;</span><br><span class="line">    &lt;%@include file=&quot;common/header.jsp&quot;%&gt;</span><br><span class="line">    </span><br><span class="line">  	&lt;!-- jsp表达式  --&gt;</span><br><span class="line">  	&lt;%</span><br><span class="line">  		//变量</span><br><span class="line">  		String name = &quot;acamy&quot;;</span><br><span class="line">  		int a = 10;</span><br><span class="line">  		int b =20;</span><br><span class="line">  	 %&gt;</span><br><span class="line">  	&lt;%=name %&gt;  </span><br><span class="line">  	&lt;br/&gt;</span><br><span class="line">  	&lt;%=(a-b) %&gt;  </span><br><span class="line">  	&lt;hr/&gt;</span><br><span class="line">  	&lt;!-- jsp脚本  --&gt;</span><br><span class="line">  	&lt;%</span><br><span class="line">  		//生成随机数</span><br><span class="line">  		Random ran = new Random();</span><br><span class="line">  		float num = ran.nextFloat();</span><br><span class="line">  	 %&gt;</span><br><span class="line">  	 随机小数：&lt;%=num %&gt;</span><br><span class="line">  	 &lt;hr/&gt;</span><br><span class="line">  	 &lt;!-- 穿插html代码 --&gt;</span><br><span class="line">  	 &lt;%</span><br><span class="line">  	 	for(int i=1;i&lt;=6;i++)&#123; 	</span><br><span class="line">  	  %&gt;</span><br><span class="line">  	 	&lt;h&lt;%=i %&gt;&gt;标题&lt;%=i %&gt;&lt;/h&lt;%=i %&gt;&gt;</span><br><span class="line">  	 &lt;%</span><br><span class="line">  	  &#125;</span><br><span class="line">  	  %&gt;</span><br><span class="line">  	  &lt;hr/&gt;</span><br><span class="line">  	  &lt;!-- 练习： 使用脚本和html代码显示99乘法表 --&gt;</span><br><span class="line">  	 &lt;%</span><br><span class="line">  	 	for(int i=1;i&lt;=9;i++)&#123;//行</span><br><span class="line">  	 		for(int j=1;j&lt;=i;j++)&#123;//公式</span><br><span class="line">  	 %&gt;			</span><br><span class="line">  	 		&lt;%=i %&gt; x &lt;%=j %&gt;=&lt;%=(i*j) %&gt; </span><br><span class="line">  	 	&lt;%			</span><br><span class="line">  	 		&#125;</span><br><span class="line">  	 	%&gt;</span><br><span class="line">  	 	   &lt;br/&gt;</span><br><span class="line">  	 	&lt;% 	</span><br><span class="line">  	 	&#125;</span><br><span class="line">  	  %&gt;</span><br><span class="line">  	  &lt;%</span><br><span class="line">  	  	String age = &quot;20&quot;;</span><br><span class="line">  	  	</span><br><span class="line">  	  	/* 脚本中不能声明方法</span><br><span class="line">  	  	public String getAge()&#123;</span><br><span class="line">  	  		return age;</span><br><span class="line">  	  	&#125;</span><br><span class="line">  	  	*/</span><br><span class="line">  	   %&gt;</span><br><span class="line">  	  </span><br><span class="line">  	  </span><br><span class="line">  	  &lt;!-- jsp声明 --&gt;</span><br><span class="line">  	  &lt;%!</span><br><span class="line">  	   //变量</span><br><span class="line">  	  	String name = &quot;jacky&quot;;</span><br><span class="line">  	  	</span><br><span class="line">  	  	public String getName()&#123;</span><br><span class="line">  	  		return name;</span><br><span class="line">  	  	&#125;</span><br><span class="line">  	  	</span><br><span class="line">  	  	/*jsp声明中不能重复定义翻译好的一些方法</span><br><span class="line">  	  	public void _jspInit()&#123;</span><br><span class="line">  	  	</span><br><span class="line">  	  	&#125;</span><br><span class="line">  	  	*/</span><br><span class="line">  	   %&gt;</span><br><span class="line">  	   &lt;!-- html注释 --&gt;</span><br><span class="line">  	  &lt;%-- &lt;jsp:forward page=&quot;/01.hello.jsp&quot;&gt;&lt;/jsp:forward&gt; --%&gt;</span><br><span class="line">  	   &lt;%-- jsp注释 --%&gt;</span><br><span class="line">  	   </span><br><span class="line">  	 </span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>效果如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-eab91a9e66f6b6f1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>

        </div>
        
        
        
    </div>
</div>





    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-07T15:03:44.000Z">2017-06-07</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/JavaWeb/">JavaWeb</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    8 minutes read (About 1235 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/07/JavaWeb基础之JSP进阶/">JavaWeb基础之JSP进阶</a>
            
        </h1>
        <div class="content">
            <h2 id="1-九大内置对象"><a href="#1-九大内置对象" class="headerlink" title="1.九大内置对象"></a>1.九大内置对象</h2><blockquote>
<p>在一篇中我们知道tomcat服务器翻译成了java源文件，每次说jsp文件时都会调用_jspService方法，当该方法中我们可以看到：</p>
</blockquote>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">final javax.servlet.jsp.PageContext pageContext;</span><br><span class="line">javax.servlet.http.HttpSession session = null;   </span><br><span class="line">final javax.servlet.ServletContext application;</span><br><span class="line">final javax.servlet.ServletConfig config;</span><br><span class="line">javax.servlet.jsp.JspWriter out = null;</span><br><span class="line">final java.lang.Object page = this;</span><br><span class="line">javax.servlet.jsp.JspWriter _jspx_out = null;</span><br><span class="line">javax.servlet.jsp.PageContext _jspx_page_context = null;</span><br></pre></td></tr></table></figure>
<p>当用page指定指定当前页面是否为错误处理页面时还会多几行：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Throwable exception = org.apache.jasper.runtime.JspRuntimeLibrary.getThrowable(request);</span><br><span class="line">if (exception != null) &#123;</span><br><span class="line">     response.setStatus(javax.servlet.http.HttpServletResponse.SC_INTERNAL_SERVER_ERROR);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>以上即为我们所说的JSP九大内置对象，JSP技术的设计者为便于开发人员在编写JSP页面时获得这些web对象的引用，特意定义了9个相应的变量，开发人员在JSP页面中通过这些变量就可以快速获得这9大对象的引用。<br>概括如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-f6dac3767a89b9a2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>注意：<br><strong>out隐式对象：</strong></p>
<blockquote>
<p>out隐式对象用于向客户端发送文本数据。<br>out对象是通过调用pageContext对象的getOut方法返回的，其作用和用法ServletResponse.getWriter方法返回的PrintWriter对象非常相似。<br>JSP页面中的out隐式对象的类型为JspWriter，JspWriter相当于一种带缓存功能的PrintWriter，设置JSP页面的page指令的buffer属性可以调整它的缓存大小，甚至关闭它的缓存。<br>只有向out对象中写入了内容，且满足如下任何一个条件时，out对象才去调用ServletResponse.getWriter方法，并通过该方法返回的PrintWriter对象将out对象的缓冲区中的内容真正写入到Servlet引擎提供的缓冲区中：</p>
<ul>
<li>1.设置page指令的buffer属性关闭了out对象的缓存功能</li>
<li>2.out对象的缓冲区已满</li>
<li>3.刷新缓存区</li>
<li>4.整个JSP页面结束</li>
</ul>
</blockquote>
<p><strong>pageContext对象:</strong></p>
<blockquote>
<p>pageContext对象的类型是PageContext，叫jsp的上下文对象<br>封装了其它8大隐式对象的引用,代表当前JSP页面的运行环境,可以通过pageContext获取其他八个内置对象</p>
<ul>
<li>1.getException方法返回exception隐式对象 </li>
<li>2.getPage方法返回page隐式对象</li>
<li>3.getRequest方法返回request隐式对象 </li>
<li>4.getResponse方法返回response隐式对象 </li>
<li>5.getServletConfig方法返回config隐式对象</li>
<li>6.getServletContext方法返回application隐式对象</li>
<li>7.getSession方法返回session隐式对象 </li>
<li>8.getOut方法返回out隐式对象</li>
</ul>
</blockquote>
<h2 id="2-四大域对象"><a href="#2-四大域对象" class="headerlink" title="2. 四大域对象"></a>2. 四大域对象</h2><blockquote>
<p>用于保存数据、获取数据和共享数据</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-b1d742ef9ef7a052.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h3 id="2-1-域对象方法："><a href="#2-1-域对象方法：" class="headerlink" title="2.1 域对象方法："></a>2.1 域对象方法：</h3><h4 id="2-1-1-保存数据"><a href="#2-1-1-保存数据" class="headerlink" title="2.1.1 保存数据"></a>2.1.1 保存数据</h4><p>setAttribute(“name”,Object); //pageContext对象还可以保存数据到指定域，默认为page域</p>
<h4 id="2-1-1-获取数据"><a href="#2-1-1-获取数据" class="headerlink" title="2.1.1 获取数据"></a>2.1.1 获取数据</h4><p>getAttribute(“name”) ; //pageContext对象还可以获取指定域的数据，默认为page域</p>
<h4 id="2-1-1-清除数据"><a href="#2-1-1-清除数据" class="headerlink" title="2.1.1 清除数据"></a>2.1.1 清除数据</h4><p>removeAttribute(“name”) </p>
<h4 id="2-1-1-搜索数据"><a href="#2-1-1-搜索数据" class="headerlink" title="2.1.1 搜索数据"></a>2.1.1 搜索数据</h4><p>pageContext.findAttribute(“name”);  //pageContext特有,自动在四个域中搜索数据<br>顺序： page域 -&gt; request域 -&gt; session域- &gt; context域（application域）</p>
<p>##3.EL表达式</p>
<blockquote>
<p>全名为Expression Language，用于向浏览器输出域对象中的变量值或表达式计算的结果</p>
</blockquote>
<p>语法： <strong>${变量或表达式}</strong><br>1）输出基本数据类型变量<br>                        1.1 从四个域获取<br>                            ${name}<br>                        1.2 指定域获取<br>                            ${pageScope.name}<br>                    域范围： pageScope/ requestScope / sessionScope / applicationScope<br>2）输出对象的属性值<br>                        Student<br>                3）输出集合对象<br>                       List  和 Map<br>                4）EL表达式计算</p>
<p>举例1：获取域中的变量<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">1)从四个域自动搜索</span><br><span class="line"> --%&gt;</span><br><span class="line"></span><br><span class="line"> $&#123;name &#125;</span><br><span class="line">&lt;%--</span><br><span class="line">$&#123;name &#125; 等价于</span><br><span class="line"> &lt;%=pageContext.findAttribute(&quot;name&quot;)%&gt;</span><br><span class="line">--%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--</span><br><span class="line"> 2） 从指定的域中获取数据</span><br><span class="line"> --%&gt;</span><br><span class="line"></span><br><span class="line"> $&#123;pageScope.name &#125;</span><br><span class="line">&lt;%--</span><br><span class="line">pageScope为EL中的隐含对象，像这样的还有requestScope，sessionScope，applicationScope，pageContext等十一个</span><br><span class="line">$&#123;pageScope.name &#125; 等价于</span><br><span class="line">&lt;%= pageContext.getAttribute(&quot;name&quot;,PageContext.PAGE_SCOPE)%&gt;	    	</span><br><span class="line"> --%&gt;</span><br></pre></td></tr></table></figure></p>
<p>举例2：获取域中的对象<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    	//保存数据</span><br><span class="line">    	Student student = new Student(&quot;eric&quot;,20);</span><br><span class="line">    	//放入域中</span><br><span class="line">    	pageContext.setAttribute(&quot;student&quot;,student);</span><br><span class="line">    	</span><br><span class="line">    	//List</span><br><span class="line">    	List&lt;Student&gt;  list = new ArrayList&lt;Student&gt;();</span><br><span class="line">    	list.add(new Student(&quot;rose&quot;,18));</span><br><span class="line">    	list.add(new Student(&quot;jack&quot;,28));</span><br><span class="line">    	list.add(new Student(&quot;lucy&quot;,38));</span><br><span class="line">    	//放入域中</span><br><span class="line">    	pageContext.setAttribute(&quot;list&quot;,list);</span><br><span class="line">    	</span><br><span class="line">    	//Map</span><br><span class="line">    	Map&lt;String,Student&gt; map = new HashMap&lt;String,Student&gt;();</span><br><span class="line">    	map.put(&quot;100&quot;,new Student(&quot;mark&quot;,20));</span><br><span class="line">    	map.put(&quot;101&quot;,new Student(&quot;maxwell&quot;,30));</span><br><span class="line">    	map.put(&quot;102&quot;,new Student(&quot;narci&quot;,40));</span><br><span class="line">    	//放入域中</span><br><span class="line">    	pageContext.setAttribute(&quot;map&quot;,map);</span><br><span class="line">    	</span><br><span class="line">%&gt;</span><br><span class="line">     </span><br><span class="line">     &lt;%--使用EL获取对象 --%&gt;</span><br><span class="line">     $&#123;student.name&#125; - $&#123;student.age &#125;</span><br><span class="line">     &lt;%--</span><br><span class="line">      $&#123;student.name&#125; 等价于     （点相对于调用getXX（）方法）</span><br><span class="line">         &lt;%=((Student)pageContext.findAttribute(&quot;student&quot;)).getName()%&gt;</span><br><span class="line">      --%&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;hr/&gt;</span><br><span class="line">      &lt;%--使用EL获取List对象 --%&gt;</span><br><span class="line">      $&#123;list[0].name &#125; - $&#123;list[0].age &#125;&lt;br/&gt;</span><br><span class="line">      $&#123;list[1].name &#125; - $&#123;list[1].age &#125;&lt;br/&gt;</span><br><span class="line">      $&#123;list[2].name &#125; - $&#123;list[2].age &#125;</span><br><span class="line">      &lt;%--</span><br><span class="line">      list[0]等价于       (中括号相对于调用get(参数)方法)</span><br><span class="line">      		((List)pageContext.findAttribute(&quot;list&quot;)).get(0)</span><br><span class="line">       --%&gt;</span><br><span class="line">       &lt;hr/&gt;</span><br><span class="line">       &lt;%--使用EL获取Map对象 --%&gt;</span><br><span class="line">       $&#123;map[&apos;100&apos;].name &#125; -  $&#123;map[&apos;100&apos;].age &#125;&lt;br/&gt;</span><br><span class="line">       $&#123;map[&apos;101&apos;].name &#125; -  $&#123;map[&apos;101&apos;].age &#125;&lt;br/&gt;</span><br><span class="line">       $&#123;map[&apos;102&apos;].name &#125; -  $&#123;map[&apos;102&apos;].age &#125;&lt;br/&gt;</span><br></pre></td></tr></table></figure></p>
<p>举例3：表达式计算<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  	1)算术表达式</span><br><span class="line">  	  +  -  *  /</span><br><span class="line">   --%&gt;</span><br><span class="line">   $&#123;10+5 &#125;&lt;br/&gt;</span><br><span class="line">   $&#123;10*5 &#125;</span><br><span class="line">   &lt;hr/&gt;</span><br><span class="line">   &lt;%--</span><br><span class="line">  	2)比较运算</span><br><span class="line">  	&gt;  &lt;  &gt;=  &lt;=  ==   !=</span><br><span class="line">   --%&gt;</span><br><span class="line">   $&#123;10&gt;5 &#125;&lt;br/&gt;</span><br><span class="line">   $&#123;10&lt;5 &#125;&lt;br/&gt;</span><br><span class="line">   $&#123;10!=10 &#125;</span><br><span class="line">   &lt;hr/&gt;</span><br><span class="line">   &lt;%--</span><br><span class="line">  	3)逻辑运算</span><br><span class="line">  	 &amp;&amp;  ||  !</span><br><span class="line">   --%&gt;</span><br><span class="line">   $&#123;true &amp;&amp; false &#125;&lt;br/&gt;</span><br><span class="line">   $&#123;true || false &#125;&lt;br/&gt;</span><br><span class="line">   $&#123;!false &#125;&lt;br/&gt;</span><br><span class="line">   &lt;hr/&gt;</span><br><span class="line">    &lt;%--</span><br><span class="line">  	4)判空</span><br><span class="line">  	null 或 空字符串:  empty</span><br><span class="line">   --%&gt;</span><br><span class="line">   &lt;%</span><br><span class="line">   	//String name = &quot;eric&quot;;</span><br><span class="line">   	//String name = null;</span><br><span class="line">   	String name = &quot;&quot;;</span><br><span class="line">   	pageContext.setAttribute(&quot;name&quot;,name);</span><br><span class="line">    %&gt;</span><br><span class="line">    判断null： $&#123;name==null &#125;&lt;br/&gt;</span><br><span class="line">    判断空字符： $&#123;name==&quot;&quot; &#125;&lt;br/&gt;</span><br><span class="line">   判空：  $&#123;name==null || name==&quot;&quot; &#125;</span><br><span class="line">   另一种判空写法： $&#123;empty name &#125;</span><br></pre></td></tr></table></figure></p>

        </div>
        
        
        
    </div>
</div>





    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-07T04:33:09.000Z">2017-06-07</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Oracle/">Oracle</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 586 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/07/Oracle之DML触发器基本使用/">Oracle之DML触发器基本使用</a>
            
        </h1>
        <div class="content">
            <blockquote>
<p>触发器是当某个事件发生时自动地隐式运行。DML触发器指的是在对表进行增删改操作引发的自动执行事件。</p>
</blockquote>
<p>创建触发器的一般语法：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE [OR REPLACE] TRIGGER trigger_name</span><br><span class="line">&#123;BEFORE | AFTER &#125;</span><br><span class="line">&#123;INSERT | DELETE | UPDATE [OF column [, column …]]&#125;</span><br><span class="line">[OR &#123;INSERT | DELETE | UPDATE [OF column [, column …]]&#125;...]</span><br><span class="line">ON [schema.]table_name | [schema.]view_name</span><br><span class="line">[REFERENCING &#123;OLD [AS] old | NEW [AS] new| PARENT as parent&#125;]</span><br><span class="line">[FOR EACH ROW ]</span><br><span class="line">[WHEN condition]</span><br><span class="line">PL/SQL_BLOCK | CALL procedure_name;</span><br></pre></td></tr></table></figure></p>
<p>其中：<br>BEFORE 和AFTER指出触发器的触发时序分别为前触发和后触发方式。<br>FOR EACH ROW选项说明触发器为行触发器。<br>REFERENCING 子句说明相关名称，在行触发器的PL/SQL块和WHEN 子句中可以使用相关名称参照当前的新、旧列值，默认的相关名称分别为OLD和NEW。触发器的PL/SQL块中应用相关名称时，必须在它们之前加冒号(:)，但在WHEN子句中则不能加冒号。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-1904ac020f663cb0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>WHEN 子句说明触发约束条件。</p>
<p><strong>Demo1:</strong> 记录每条记录的插入时间(10g后可以在建表时用rowdependencies实现等级追踪实现效果同样)<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">--先创建日志记录表</span><br><span class="line">CREATE TABLE SZ_RECORD_TEST (&quot;SZID&quot; VARCHAR2(1024) NOT NULL, </span><br><span class="line">  &quot;SZVERSION&quot; VARCHAR2(1024), </span><br><span class="line">  &quot;EVENT_TIME&quot; DATE DEFAULT sysdate NOT NULL);  </span><br><span class="line"></span><br><span class="line">CREATE OR REPLACE TRIGGER TRG_SZD</span><br><span class="line">  AFTER INSERT ON TT_SZD FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    INSERT INTO SZ_RECORD_TEST(SZID,SZVERSION)</span><br><span class="line">    VALUES</span><br><span class="line">      (:NEW.SZD_ID,</span><br><span class="line">    :NEW.VERSION);</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></p>
<p><strong> Demo2:</strong> 限制对Departments表修改（包括INSERT,DELETE,UPDATE）的时间范围，即不允许在非工作时间修改departments表。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE TRIGGER tr_dept_time</span><br><span class="line">BEFORE INSERT OR DELETE OR UPDATE</span><br><span class="line">ON departments</span><br><span class="line">BEGIN</span><br><span class="line"> IF (TO_CHAR(sysdate,&apos;DAY&apos;) IN (&apos;星期六&apos;, &apos;星期日&apos;)) OR (TO_CHAR(sysdate, &apos;HH24:MI&apos;) NOT BETWEEN &apos;08:30&apos; AND &apos;18:00&apos;) THEN</span><br><span class="line">     RAISE_APPLICATION_ERROR(-20001, &apos;不是上班时间，不能修改departments表&apos;);</span><br><span class="line"> END IF;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></p>
<p><strong> Demo3:</strong> 限定只对部门号为80的记录进行行触发器操作。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE TRIGGER tr_emp_sal_comm</span><br><span class="line">BEFORE UPDATE OF salary, commission_pct</span><br><span class="line">       OR DELETE</span><br><span class="line">ON HR.employees</span><br><span class="line">FOR EACH ROW</span><br><span class="line">WHEN (old.department_id = 80)</span><br><span class="line">BEGIN</span><br><span class="line"> CASE</span><br><span class="line">     WHEN UPDATING (&apos;salary&apos;) THEN</span><br><span class="line">        IF :NEW.salary &lt; :old.salary THEN</span><br><span class="line"> </span><br><span class="line">           RAISE_APPLICATION_ERROR(-20001, &apos;部门80的人员的工资不能降&apos;);</span><br><span class="line">        END IF;</span><br><span class="line">     WHEN UPDATING (&apos;commission_pct&apos;) THEN</span><br><span class="line"> </span><br><span class="line">        IF :NEW.commission_pct &lt; :old.commission_pct THEN</span><br><span class="line">           RAISE_APPLICATION_ERROR(-20002, &apos;部门80的人员的奖金不能降&apos;);</span><br><span class="line">        END IF;</span><br><span class="line">     WHEN DELETING THEN</span><br><span class="line">          RAISE_APPLICATION_ERROR(-20003, &apos;不能删除部门80的人员记录&apos;);</span><br><span class="line">     END CASE;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></p>

        </div>
        
        
        
    </div>
</div>





    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-06T15:10:19.000Z">2017-06-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/JavaWeb/">JavaWeb</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    18 minutes read (About 2672 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/06/JavaWeb基础之Cookie与Session/">JavaWeb基础之Cookie与Session</a>
            
        </h1>
        <div class="content">
            <blockquote>
<p><strong>Cookie:</strong><br>Cookie是客户端技术，程序把每个用户的数据以cookie的形式写给用户各自的浏览器。当用户使用浏览器再去访问服务器中的web资源时，就会带着各自的数据去。这样，web资源处理的就是用户各自的数据了。<br><strong>Session:</strong><br>Session是服务器端技术，利用这个技术，服务器在运行时可以为每一个用户的浏览器创建一个其独享的session对象，由于session为用户浏览器独享，所以用户在访问服务器的web资源时，可以把各自的数据放在各自的session中，当用户再去访问服务器中的其它web资源时，其它web资源再从用户各自的session中取出数据为用户服务。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-eb5dfb4763db5c82.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="本文内容"></p>
<h2 id="1-javax-servlet-http-Cookie"><a href="#1-javax-servlet-http-Cookie" class="headerlink" title="1.javax.servlet.http.Cookie"></a>1.javax.servlet.http.Cookie</h2><blockquote>
<p>Java提供操作Cookie的API</p>
</blockquote>
<h3 id="1-1-演示Cookie的创建与使用"><a href="#1-1-演示Cookie的创建与使用" class="headerlink" title="1.1 演示Cookie的创建与使用"></a>1.1 演示Cookie的创建与使用</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">public class CookieDemo1 extends HttpServlet &#123;</span><br><span class="line"></span><br><span class="line">	public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line">		//1.创建Cookie对象</span><br><span class="line">		Cookie cookie1 = new Cookie(&quot;name&quot;,&quot;eric&quot;);</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		/**</span><br><span class="line">		 * 1）设置cookie的有效路径。默认情况：有效路径在当前web应用下。 /demo</span><br><span class="line">               *有效路径指的是cookie的有效路径保存在哪里，那么浏览器在有效路径下</span><br><span class="line">              *访问服务器时就会带着cookie信息，否则不带cookie信息。</span><br><span class="line">		 */</span><br><span class="line">		//cookie1.setPath(&quot;/demo&quot;);</span><br><span class="line">		</span><br><span class="line">		/**</span><br><span class="line">		 * 2)设置cookie的有效时间</span><br><span class="line">		 * 正整数：表示cookie数据保存浏览器的缓存目录（硬盘中），数值表示保存的时间。</span><br><span class="line">			负整数：表示cookie数据保存浏览器的内存中。浏览器关闭cookie就丢失了！！</span><br><span class="line">			零：表示删除同名的cookie数据</span><br><span class="line"></span><br><span class="line">		 */</span><br><span class="line">		//cookie1.setMaxAge(20); //20秒，从最后不调用cookie开始计算</span><br><span class="line">		cookie1.setMaxAge(-1); //cookie保存在浏览器内存（会话cookie）</span><br><span class="line">		//cookie1.setMaxAge(0);</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		//2.把cookie数据发送到浏览器（通过响应头发送： set-cookie名称）</span><br><span class="line">		//response.setHeader(&quot;set-cookie&quot;, cookie.getName()+&quot;=&quot;+cookie.getValue()+&quot;,email=eric@qq.com&quot;);</span><br><span class="line">		//推荐使用这种方法，避免手动发送cookie信息</span><br><span class="line">		response.addCookie(cookie1);</span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">		</span><br><span class="line">		//3.接收浏览器发送的cookie信息</span><br><span class="line">		/*String name = request.getHeader(&quot;cookie&quot;);</span><br><span class="line">		System.out.println(name);*/</span><br><span class="line">		Cookie[] cookies = request.getCookies();</span><br><span class="line">		//注意：判断null,否则空指针</span><br><span class="line">		if(cookies!=null)&#123;</span><br><span class="line">			//遍历</span><br><span class="line">			for(Cookie c:cookies)&#123;</span><br><span class="line">				String name = c.getName();</span><br><span class="line">				String value = c.getValue();</span><br><span class="line">				System.out.println(name+&quot;=&quot;+value);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;else&#123;</span><br><span class="line">			System.out.println(&quot;没有接收cookie数据&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-2-Cookie的使用实例，用户上次访问时间"><a href="#1-2-Cookie的使用实例，用户上次访问时间" class="headerlink" title="1.2. Cookie的使用实例，用户上次访问时间"></a>1.2. Cookie的使用实例，用户上次访问时间</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">public class HistServlet extends HttpServlet &#123;</span><br><span class="line"></span><br><span class="line">	public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line">		response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br><span class="line"></span><br><span class="line">		// 获取当前时间</span><br><span class="line">		SimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;);</span><br><span class="line">		String curTime = format.format(new Date());</span><br><span class="line"></span><br><span class="line">		// 取得cookie</span><br><span class="line">		Cookie[] cookies = request.getCookies();</span><br><span class="line">		String lastTime = null;</span><br><span class="line">		if (cookies != null) &#123;</span><br><span class="line">			for (Cookie cookie : cookies) &#123;</span><br><span class="line">				if (cookie.getName().equals(&quot;lastTime&quot;)) &#123;</span><br><span class="line">					// 有lastTime的cookie，已经是第n次访问</span><br><span class="line">					lastTime = cookie.getValue();// 上次访问的时间</span><br><span class="line">					// 第n次访问</span><br><span class="line">					// 1.把上次显示时间显示到浏览器</span><br><span class="line">					response.getWriter().write(</span><br><span class="line">							&quot;欢迎回来，你上次访问的时间为：&quot; + lastTime + &quot;,当前时间为：&quot; + curTime);</span><br><span class="line">					// 2.更新cookie</span><br><span class="line">					cookie.setValue(curTime);</span><br><span class="line">					cookie.setMaxAge(1 * 30 * 24 * 60 * 60);</span><br><span class="line">					// 3.把更新后的cookie发送到浏览器</span><br><span class="line">					response.addCookie(cookie);</span><br><span class="line">					break;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		/**</span><br><span class="line">		 * 第一次访问（没有cookie 或 有cookie，但没有名为lastTime的cookie）</span><br><span class="line">		 */</span><br><span class="line">		if (cookies == null || lastTime == null) &#123;</span><br><span class="line">			// 1.显示当前时间到浏览器</span><br><span class="line">			response.getWriter().write(&quot;你是首次访问本网站，当前时间为：&quot; + curTime);</span><br><span class="line">			// 2.创建Cookie对象</span><br><span class="line">			Cookie cookie = new Cookie(&quot;lastTime&quot;, curTime);</span><br><span class="line">			cookie.setPath(&quot;/CookieDemo&quot;);</span><br><span class="line">			cookie.setMaxAge(-1);// 设置浏览器关闭cookie就丢失</span><br><span class="line">			// cookie.setMaxAge(1*30*24*60*60);//保存一个月</span><br><span class="line">			// 3.把cookie发送到浏览器保存</span><br><span class="line">			response.addCookie(cookie);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下：<br><img src="http://upload-images.jianshu.io/upload_images/5990755-2c9c5e6246691832.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="**第一次访问时效果如下，可以看到请求头里没有带任何Cookie信息，而响应头里面设置了Cookie的信息**"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-1d2a75e8ca0a7788.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="**当第二次及后面的访问时，请求头里面都会带有保存上次访问的Cookie信息，响应头里面会对这个信息进行更新。**"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-2aeb771b8e5a52e0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="**同时我们也可以在浏览器里看到该Cookie的详细信息**"></p>
<p><strong>注意：</strong>浏览器一般只允许存放300个Cookie，每个站点最多存放20个Cookie，每个Cookie的大小限制为4KB。</p>
<h2 id="2-javax-servlet-http-HttpSession"><a href="#2-javax-servlet-http-HttpSession" class="headerlink" title="2. javax.servlet.http.HttpSession"></a>2. javax.servlet.http.HttpSession</h2><blockquote>
<p>Java提供操作Session的API,服务器在浏览器第一次访问时如果创建了一个Session对象就会给该对象分配一个id并以Cookie的形式保存在浏览器中，以后在有效期内浏览器访问服务器时就会带着该id,服务器通过该id就能匹配到存储在服务器中对应的信息。</p>
</blockquote>
<h2 id="2-1-Sesision的存储原理"><a href="#2-1-Sesision的存储原理" class="headerlink" title="2.1 Sesision的存储原理"></a>2.1 Sesision的存储原理</h2><p><strong>Demo:</strong><br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class SessionDemo1 extends HttpServlet &#123;</span><br><span class="line">	public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">		response.setCharacterEncoding(&quot;UTF=8&quot;);</span><br><span class="line">		response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">		// 使用request对象的getSession()获取session，如果session不存在则创建一个</span><br><span class="line">		HttpSession session = request.getSession();</span><br><span class="line">		// 将数据存储到session中</span><br><span class="line">		session.setAttribute(&quot;data&quot;, &quot;acamy&quot;);</span><br><span class="line">		// 获取session的Id</span><br><span class="line">		String sessionId = session.getId();</span><br><span class="line">		// 判断session是不是新创建的</span><br><span class="line">		response.getWriter().println(new Date());</span><br><span class="line">		if (session.isNew()) &#123;</span><br><span class="line">			response.getWriter().print(&quot;session创建成功，session的id是：&quot; + sessionId);</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			response.getWriter().print(</span><br><span class="line">					&quot;服务器已经存在该session了，session的id是：&quot; + sessionId);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void doPost(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line">		doGet(request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>效果如下：<br><img src="http://upload-images.jianshu.io/upload_images/5990755-365e4133be57b919.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="可以看到第一次访问时浏览器会创建一个Session对象，给该对象分配一个id，并以JSESSIONID作为键，id作为值以Cookie的形式保存在浏览器中"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-52f251b9f3bda60c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="第二次访问时浏览器发起请求时就会在Cookie里面带着该id信息，服务器就能根据这个id匹配存储在服务器的里面的信息"></p>
<h3 id="2-2-浏览器禁用Cookie后的session处理"><a href="#2-2-浏览器禁用Cookie后的session处理" class="headerlink" title="2.2.浏览器禁用Cookie后的session处理"></a>2.2.浏览器禁用Cookie后的session处理</h3><blockquote>
<p>当我们想实现提供用户浏览过的商品时，利用上面的Cookie和Session思想很容易实现，但是如果浏览器作了上图中的设置，也就是禁用了Cookie,我们又该如何实现呢，这就需要用到URL重写：</p>
</blockquote>
<p>用于对sendRedirect方法后的url地址进行重写。<br><strong>response.encodeRedirectURL(java.lang.String url) </strong></p>
<p>//用于对表单action和超链接的url地址进行重写<br><strong>response.encodeURL(java.lang.String url)</strong></p>
<blockquote>
<p><strong>String javax.servlet.http.HttpServletResponse.encodeURL(String url)</strong><br>Encodes the specified URL by including the session ID in it, or, if encoding is not needed, returns the URL unchanged. The implementation of this method includes the logic to determine whether the session ID needs to be encoded in the URL. For example, if the browser supports cookies, or session tracking is turned off, URL encoding is unnecessary.<br>看了上面官方对该方法的解释就是对特定的URL添加session ID进行编码，如果不需要的话就不会对URL作任何改变。所有对该方法的实现应该包含判断session ID的信息是否需要添加到URL里面对URL作改变的逻辑。例如，如果浏览器支持cookies,或者session跟踪关了的话，就不对URL作改变。</p>
</blockquote>
<p>下面看实例源码：</p>
<p><strong>IndexServlet:</strong>首页，列出所有书<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">public class IndexServlet extends HttpServlet &#123;</span><br><span class="line"></span><br><span class="line">	public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">		response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">		PrintWriter out = response.getWriter();</span><br><span class="line"></span><br><span class="line">		// 创建Session</span><br><span class="line">		request.getSession();</span><br><span class="line"></span><br><span class="line">		out.write(&quot;本网站有如下书：&lt;br/&gt;&quot;);</span><br><span class="line">		Set&lt;Map.Entry&lt;String, Book&gt;&gt; set = DB.getAll().entrySet();</span><br><span class="line">		for (Map.Entry&lt;String, Book&gt; me : set) &#123;</span><br><span class="line">			Book book = me.getValue();</span><br><span class="line">			String url = request.getContextPath() + &quot;/buyServlet?id=&quot;</span><br><span class="line">					+ book.getId();</span><br><span class="line">			// response. encodeURL(java.lang.String</span><br><span class="line">			// url)用于对表单action和超链接的url地址进行重写，通过此方法带上JSESSSIONID</span><br><span class="line">			url = response.encodeURL(url);// 将超链接的url地址进行重写</span><br><span class="line">			out.println(book.getName() + &quot;   &lt;a href=&apos;&quot; + url + &quot;&apos;&gt;购买&lt;/a&gt;&lt;br/&gt;&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void doPost(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line">		doGet(request, response);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author gacl 模拟数据库</span><br><span class="line"> */</span><br><span class="line">class DB &#123;</span><br><span class="line">	private static Map&lt;String, Book&gt; map = new LinkedHashMap&lt;String, Book&gt;();</span><br><span class="line">	static &#123;</span><br><span class="line">		map.put(&quot;1&quot;, new Book(&quot;1&quot;, &quot;javaweb开发&quot;));</span><br><span class="line">		map.put(&quot;2&quot;, new Book(&quot;2&quot;, &quot;spring开发&quot;));</span><br><span class="line">		map.put(&quot;3&quot;, new Book(&quot;3&quot;, &quot;hibernate开发&quot;));</span><br><span class="line">		map.put(&quot;4&quot;, new Book(&quot;4&quot;, &quot;struts开发&quot;));</span><br><span class="line">		map.put(&quot;5&quot;, new Book(&quot;5&quot;, &quot;ajax开发&quot;));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public static Map&lt;String, Book&gt; getAll() &#123;</span><br><span class="line">		return map;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Book &#123;</span><br><span class="line"></span><br><span class="line">	private String id;</span><br><span class="line">	private String name;</span><br><span class="line"></span><br><span class="line">	public Book() &#123;</span><br><span class="line">		super();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Book(String id, String name) &#123;</span><br><span class="line">		super();</span><br><span class="line">		this.id = id;</span><br><span class="line">		this.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String getId() &#123;</span><br><span class="line">		return id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setId(String id) &#123;</span><br><span class="line">		this.id = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String getName() &#123;</span><br><span class="line">		return name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setName(String name) &#123;</span><br><span class="line">		this.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>BuyServlet:</strong>点击购买后的逻辑<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class BuyServlet extends HttpServlet &#123;</span><br><span class="line"></span><br><span class="line">	public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line">		String id = request.getParameter(&quot;id&quot;);</span><br><span class="line">		Book book = DB.getAll().get(id); // 得到用户想买的书</span><br><span class="line">		HttpSession session = request.getSession();</span><br><span class="line"></span><br><span class="line">		HashSet&lt;Book&gt; set = (HashSet) session.getAttribute(&quot;set&quot;); // 得到用户用于保存所有书的容器</span><br><span class="line">		if (set == null) &#123;</span><br><span class="line">			set = new HashSet&lt;Book&gt;();</span><br><span class="line">			session.setAttribute(&quot;set&quot;, set);</span><br><span class="line">		&#125;</span><br><span class="line">		set.add(book);</span><br><span class="line">		// response. encodeRedirectURL(java.lang.String</span><br><span class="line">		// url)用于对sendRedirect方法后的url地址进行重写</span><br><span class="line">		String url = request.getContextPath() + &quot;/listCartServlet&quot;;</span><br><span class="line">		url = response.encodeRedirectURL(url);//通过此方法带上JSESSSIONID</span><br><span class="line">		System.out.println(url);</span><br><span class="line">		response.sendRedirect(url);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void doPost(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line">		doGet(request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>ListCartServlet:</strong>购物车页面<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class ListCartServlet extends HttpServlet &#123;</span><br><span class="line"></span><br><span class="line">	public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line">		response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">		PrintWriter out = response.getWriter();</span><br><span class="line">		HttpSession session = request.getSession();</span><br><span class="line"></span><br><span class="line">		HashSet&lt;Book&gt; set = (HashSet) session.getAttribute(&quot;set&quot;);</span><br><span class="line">		if (set == null || set.size() == 0) &#123;</span><br><span class="line">			out.write(&quot;对不起，您还没有购买任何商品!!&quot;);</span><br><span class="line">			return;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		// 显示用户买过的商品</span><br><span class="line">		out.write(&quot;您买过如下商品:&lt;br&gt;&quot;);</span><br><span class="line">		for (Book book : set) &#123;</span><br><span class="line">			out.write(book.getName() + &quot;&lt;br/&gt;&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void doPost(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line">		doGet(request, response);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>查看首页源码如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-f4fc6cd8f4190c96.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="每个超链接都被encode加上了JSESSSIONID的信息，所以在访问BuyServlet带着此信息就相当于带着session信息，而BuyServlet在跳转到ListCartServlet也会把url encode一下带上JSESSSIONID，三个Servlet由此实现了session共享。"></p>
<p>但当我们刷新列表页时会发现URL里面带的JSESSSIONID已经改变，购物车页面也会清空，所以并不能实现完全没禁用Cookie效果。</p>
<blockquote>
<p>当我们开启Cookie时，只有在第一次访问列表页面时会有JSESSSIONID的信息,但我们刷新列表页面时，购物车页面没有清空，页面源码如下所示，没有了JSESSSIONID的信息，证明了encode方法的智能性。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-07b2fba57baeb5f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h2 id="2-3-session对象的销毁时机"><a href="#2-3-session对象的销毁时机" class="headerlink" title="2.3 session对象的销毁时机"></a>2.3 session对象的销毁时机</h2><blockquote>
<p>session对象默认30分钟没有使用，则服务器会自动销毁session，在web.xml文件中可以手工配置session的失效时间，例如：</p>
</blockquote>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app version=&quot;2.5&quot; </span><br><span class="line">    xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; </span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; </span><br><span class="line">    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee </span><br><span class="line">    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;</span><br><span class="line">  &lt;display-name&gt;&lt;/display-name&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;welcome-file-list&gt;</span><br><span class="line">    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;</span><br><span class="line">  &lt;/welcome-file-list&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 设置Session的有效时间:以分钟为单位--&gt;</span><br><span class="line">    &lt;session-config&gt;</span><br><span class="line">        &lt;session-timeout&gt;15&lt;/session-timeout&gt;</span><br><span class="line">    &lt;/session-config&gt;</span><br><span class="line"></span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>
<p>当需要在程序中手动设置Session失效时，可以手工调用session.invalidate方法，摧毁session。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HttpSession session = request.getSession();</span><br><span class="line">//手工调用session.invalidate方法，摧毁session</span><br><span class="line">session.invalidate();</span><br></pre></td></tr></table></figure></p>

        </div>
        
        
        
    </div>
</div>





    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-05T23:45:20.000Z">2017-06-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/设计模式/">设计模式</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 minutes read (About 1052 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/06/Head First 设计模式学习系列(二)   观察者模式/">Head First 设计模式学习系列(二)   观察者模式</a>
            
        </h1>
        <div class="content">
            <blockquote>
<p>观察者模式定义了一系列对象之间的一对多关系，当一个对象(主题，也称被观察者)改变状态，其他依赖者(观察者)都会收到通知.</p>
</blockquote>
<p>##1.实例描述<br>现有负责追踪天气状况(温度，湿度，气压)的WeatherData对象，利用该对象建立一个气象观测站应用，有三种布告板，分别显示目前的状况，气象统计及简单的预报，当WeatherData里面有最新的数据测量时，三种布告板必段实时更新。并要求我们能灵活的增加观察者，移除观察者。同时在布告板的块数可能增加，如增加酷热指数布告板。</p>
<p>##2.分析思路<br>根据定义和描述，我们可以将WeatherDate作为主题，三块布告板作为观察者。首先创建Subjec接口，里面定义添加，移除，通知观察者功能，实现该接口的WeatherData通过ArrayList字段来模拟所有观察者，还有温度，湿度，气压字段，实现接口的方法。然后创建Observer接口，定义更新功能，由于每个布告板还有不同的展示方式，我们还需创建一个DispayElement接口，里面定义展示行为。所有的布告板都实现了Observer和DispayElement接口，并且定义了私有的Subject和相关私有字段。<br>WeatherData里面实现了注册和移除观察者的方法。当要增加一个布告板时，我们只需要实现Observer,DisplayElement两个接口，并且注册。</p>
<p>##3.类图实现<br>主题：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-5fb8ffdddedf9cfe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>观察者：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-a402624b6a87c4bf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>##4.代码实现<br><strong>Subject:</strong>主题接口<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public interface Subject &#123;</span><br><span class="line">	public void registerObserver(Observer o);</span><br><span class="line">	public void removeObserver(Observer o);</span><br><span class="line">	public void notifyObservers();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>WeatherData：</strong>主题的具体实现<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">import java.util.*;</span><br><span class="line"></span><br><span class="line">public class WeatherData implements Subject &#123;</span><br><span class="line">	private ArrayList observers;</span><br><span class="line">	private float temperature;</span><br><span class="line">	private float humidity;</span><br><span class="line">	private float pressure;</span><br><span class="line">	</span><br><span class="line">	public WeatherData() &#123;</span><br><span class="line">		observers = new ArrayList();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public void registerObserver(Observer o) &#123;</span><br><span class="line">		observers.add(o);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public void removeObserver(Observer o) &#123;</span><br><span class="line">		int i = observers.indexOf(o);</span><br><span class="line">		if (i &gt;= 0) &#123;</span><br><span class="line">			observers.remove(i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public void notifyObservers() &#123;</span><br><span class="line">		for (int i = 0; i &lt; observers.size(); i++) &#123;</span><br><span class="line">			Observer observer = (Observer)observers.get(i);</span><br><span class="line">			observer.update(temperature, humidity, pressure);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public void measurementsChanged() &#123;</span><br><span class="line">		notifyObservers();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public void setMeasurements(float temperature, float humidity, float pressure) &#123;</span><br><span class="line">		this.temperature = temperature;</span><br><span class="line">		this.humidity = humidity;</span><br><span class="line">		this.pressure = pressure;</span><br><span class="line">		measurementsChanged();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	// other WeatherData methods here</span><br><span class="line">	</span><br><span class="line">	public float getTemperature() &#123;</span><br><span class="line">		return temperature;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public float getHumidity() &#123;</span><br><span class="line">		return humidity;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public float getPressure() &#123;</span><br><span class="line">		return pressure;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>Observer：</strong>观察者核心接口<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface Observer &#123;</span><br><span class="line">	public void update(float temp, float humidity, float pressure);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong> DisplayElement：</strong>布告板展示行为的接口<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface DisplayElement &#123;</span><br><span class="line">	public void display();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>CurrentConditionsDisplay：</strong>观察者1，即提供目前状况的布告板<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class CurrentConditionsDisplay implements Observer, DisplayElement &#123;</span><br><span class="line">	private float temperature;</span><br><span class="line">	private float humidity;</span><br><span class="line">	private Subject weatherData;</span><br><span class="line">	</span><br><span class="line">	public CurrentConditionsDisplay(Subject weatherData) &#123;</span><br><span class="line">		this.weatherData = weatherData;</span><br><span class="line">		weatherData.registerObserver(this);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public void update(float temperature, float humidity, float pressure) &#123;</span><br><span class="line">		this.temperature = temperature;</span><br><span class="line">		this.humidity = humidity;</span><br><span class="line">		display();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public void display() &#123;</span><br><span class="line">		System.out.println(&quot;Current conditions: &quot; + temperature </span><br><span class="line">			+ &quot;F degrees and &quot; + humidity + &quot;% humidity&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>StatisticsDisplay：</strong>观察者2，即提供气象统计的布告板<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public class StatisticsDisplay implements Observer, DisplayElement &#123;</span><br><span class="line">	private float maxTemp = 0.0f;</span><br><span class="line">	private float minTemp = 200;</span><br><span class="line">	private float tempSum = 0.0f;</span><br><span class="line">	private int numReadings;</span><br><span class="line">	private Subject weatherData;</span><br><span class="line"></span><br><span class="line">	public StatisticsDisplay(WeatherData weatherData) &#123;</span><br><span class="line">		this.weatherData = weatherData;</span><br><span class="line">		weatherData.registerObserver(this);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void update(float temp, float humidity, float pressure) &#123;</span><br><span class="line">		tempSum += temp;</span><br><span class="line">		numReadings++;</span><br><span class="line"></span><br><span class="line">		if (temp &gt; maxTemp) &#123;</span><br><span class="line">			maxTemp = temp;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		if (temp &lt; minTemp) &#123;</span><br><span class="line">			minTemp = temp;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		display();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void display() &#123;</span><br><span class="line">		System.out.println(&quot;Avg/Max/Min temperature = &quot;</span><br><span class="line">				+ (tempSum / numReadings) + &quot;/&quot; + maxTemp + &quot;/&quot; + minTemp);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>ForecastDisplay： </strong>观察者3,即提供简单预报功能的布告板<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class ForecastDisplay implements Observer, DisplayElement &#123;</span><br><span class="line">	private float currentPressure = 29.92f;</span><br><span class="line">	private float lastPressure;</span><br><span class="line">	private Subject weatherData;</span><br><span class="line"></span><br><span class="line">	public ForecastDisplay(WeatherData weatherData) &#123;</span><br><span class="line">		this.weatherData = weatherData;</span><br><span class="line">		weatherData.registerObserver(this);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void update(float temp, float humidity, float pressure) &#123;</span><br><span class="line">		lastPressure = currentPressure;</span><br><span class="line">		currentPressure = pressure;</span><br><span class="line"></span><br><span class="line">		display();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void display() &#123;</span><br><span class="line">		System.out.print(&quot;Forecast: &quot;);</span><br><span class="line">		if (currentPressure &gt; lastPressure) &#123;</span><br><span class="line">			System.out.println(&quot;Improving weather on the way!&quot;);</span><br><span class="line">		&#125; else if (currentPressure == lastPressure) &#123;</span><br><span class="line">			System.out.println(&quot;More of the same&quot;);</span><br><span class="line">		&#125; else if (currentPressure &lt; lastPressure) &#123;</span><br><span class="line">			System.out.println(&quot;Watch out for cooler, rainy weather&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>HeatIndexDisplay：</strong>观察者4，即新增加的提供酷热指数的布告板<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public class HeatIndexDisplay implements Observer, DisplayElement &#123;</span><br><span class="line">	float heatIndex = 0.0f;</span><br><span class="line">	private Subject weatherData;</span><br><span class="line"></span><br><span class="line">	public HeatIndexDisplay(WeatherData weatherData) &#123;</span><br><span class="line">		this.weatherData = weatherData;</span><br><span class="line">		weatherData.registerObserver(this);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void update(float t, float rh, float pressure) &#123;</span><br><span class="line">		heatIndex = computeHeatIndex(t, rh);</span><br><span class="line">		display();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	private float computeHeatIndex(float t, float rh) &#123;</span><br><span class="line">		float index = (float) ((16.923 + (0.185212 * t) + (5.37941 * rh)</span><br><span class="line">				- (0.100254 * t * rh) + (0.00941695 * (t * t))</span><br><span class="line">				+ (0.00728898 * (rh * rh)) + (0.000345372 * (t * t * rh))</span><br><span class="line">				- (0.000814971 * (t * rh * rh))</span><br><span class="line">				+ (0.0000102102 * (t * t * rh * rh))</span><br><span class="line">				- (0.000038646 * (t * t * t)) + (0.0000291583 * (rh * rh * rh))</span><br><span class="line">				+ (0.00000142721 * (t * t * t * rh))</span><br><span class="line">				+ (0.000000197483 * (t * rh * rh * rh))</span><br><span class="line">				- (0.0000000218429 * (t * t * t * rh * rh)) + 0.000000000843296 * (t</span><br><span class="line">				* t * rh * rh * rh)) - (0.0000000000481975 * (t * t * t * rh</span><br><span class="line">				* rh * rh)));</span><br><span class="line">		return index;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void display() &#123;</span><br><span class="line">		System.out.println(&quot;Heat index is &quot; + heatIndex);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

        </div>
        
        
        
    </div>
</div>





    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-05T23:11:40.000Z">2017-06-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/设计模式/">设计模式</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 minutes read (About 1108 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/06/Head First 设计模式学习系列(一)   策略模式/">Head First 设计模式学习系列(一)   策略模式</a>
            
        </h1>
        <div class="content">
            <blockquote>
<p>定义了算法族，分别封装起来，让它们之间可以互相替换，此模式让算法的变化独立于使用算法的客户。</p>
</blockquote>
<h2 id="1-实例描述"><a href="#1-实例描述" class="headerlink" title="1. 实例描述"></a>1. 实例描述</h2><p>给客户开发一款模拟鸭子游戏，游戏中会出现各种鸭子，所有的鸭子都会都会游泳，但不同鸭子外观不一样，并且有的鸭子不会叫，有的会叫且叫声不同，有的鸭子不会飞有的会飞且飞的方式不一样。在这个过程中会增加新的鸭子种类，同一种鸭子叫的方式和飞行方式可能发生改变。</p>
<p>##2. 分析思路<br>首先创建所有的鸭子的基类（Duck)，不同的鸭子(MallarDuck,RedHeadDuck,RubberDuch,DecoyDuck,ModelDuck)都是该基类的实现类。因所有鸭子都会游泳，在基类就定义并实现游泳方法(swin)。每个鸭子都有外观(display)，外观不会改变，所以将外观方法定义为抽象方法，在具体子类里面去实现。不同鸭子的叫声(Quack)和飞行方式(Fly)不一样，而且可能发生改变，所以将这两种行为都抽象为两个接口(QuackBehavior,FlyBehavior)，并且每个接口有不同的实现方法(Quack,Squeak,MuteQuack,FakeQuack;FlyNoWay,FlyWithWings,FlyRocketPowered)。在鸭子基类里面定义有以这两个接口为成员变量的属性(FlyBehavior flyBehavior;QuackBehavior quackBehavior;)且提供更改方式(setFlyBehavior (FlyBehavior fb);setQuackBehavior(QuackBehavior qb))，不同鸭子在创建时(构造方法里）可以定义这两个字段的具体实现类，并且可以改变该属性。</p>
<h2 id="3-类图实现："><a href="#3-类图实现：" class="headerlink" title="3.类图实现："></a>3.类图实现：</h2><p>客户：可以使用下面封装好的算法族<br><img src="http://upload-images.jianshu.io/upload_images/5990755-6b2b36569ae3a74e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>算法族1：封装飞行行为<br><img src="http://upload-images.jianshu.io/upload_images/5990755-e86bb98bd4f464f7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>算法族2：封装呱呱叫行为<br><img src="http://upload-images.jianshu.io/upload_images/5990755-5db5791d6b630f44.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h2 id="4-代码实现："><a href="#4-代码实现：" class="headerlink" title="4. 代码实现："></a>4. 代码实现：</h2><p><strong>Duck</strong>：所有鸭子的基类<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public abstract class Duck &#123;</span><br><span class="line">	FlyBehavior flyBehavior;</span><br><span class="line">	QuackBehavior quackBehavior;</span><br><span class="line"> </span><br><span class="line">	public Duck() &#123;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	public void setFlyBehavior (FlyBehavior fb) &#123;</span><br><span class="line">		flyBehavior = fb;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	public void setQuackBehavior(QuackBehavior qb) &#123;</span><br><span class="line">		quackBehavior = qb;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	abstract void display();</span><br><span class="line"> </span><br><span class="line">	public void performFly() &#123;</span><br><span class="line">		flyBehavior.fly();</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	public void performQuack() &#123;</span><br><span class="line">		quackBehavior.quack();</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	public void swim() &#123;</span><br><span class="line">		System.out.println(&quot;All ducks float, even decoys!&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>MallardDuck</strong>：鸭子实现类1<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public class MallardDuck extends Duck &#123;</span><br><span class="line"> </span><br><span class="line">	public MallardDuck() &#123;</span><br><span class="line"> </span><br><span class="line">		quackBehavior = new Quack();</span><br><span class="line">                flyBehavior = new FlyWithWings();</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	public void display() &#123;</span><br><span class="line">		System.out.println(&quot;I&apos;m a real Mallard duck&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>RedHeadDuck</strong>：鸭子实现类2<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public class RedHeadDuck extends Duck &#123;</span><br><span class="line"> </span><br><span class="line">	public RedHeadDuck() &#123;</span><br><span class="line">		flyBehavior = new FlyWithWings();</span><br><span class="line">		quackBehavior = new Quack();</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	public void display() &#123;</span><br><span class="line">		System.out.println(&quot;I&apos;m a real Red Headed duck&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>RubberDuck</strong>：鸭子实现类3<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public class RubberDuck extends Duck &#123;</span><br><span class="line"> </span><br><span class="line">	public RubberDuck() &#123;</span><br><span class="line">		flyBehavior = new FlyNoWay();</span><br><span class="line">		quackBehavior = new Squeak();</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	public void display() &#123;</span><br><span class="line">		System.out.println(&quot;I&apos;m a rubber duckie&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>DecoyDuck</strong>：鸭子实现类4<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public class DecoyDuck extends Duck &#123;</span><br><span class="line">	public DecoyDuck() &#123;</span><br><span class="line">		setFlyBehavior(new FlyNoWay());</span><br><span class="line">		setQuackBehavior(new MuteQuack());</span><br><span class="line">	&#125;</span><br><span class="line">	public void display() &#123;</span><br><span class="line">		System.out.println(&quot;I&apos;m a duck Decoy&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>ModelDuck</strong>：鸭子实现类5<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public class ModelDuck extends Duck &#123;</span><br><span class="line">	public ModelDuck() &#123;</span><br><span class="line">		flyBehavior = new FlyNoWay();</span><br><span class="line">		quackBehavior = new Quack();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void display() &#123;</span><br><span class="line">		System.out.println(&quot;I&apos;m a model duck&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>FlyBehavior</strong>：封装飞行行为的接口<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public interface FlyBehavior &#123;</span><br><span class="line">	public void fly();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>FlyNoWay</strong>：飞行方式1<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public class FlyNoWay implements FlyBehavior &#123;</span><br><span class="line">	public void fly() &#123;</span><br><span class="line">		System.out.println(&quot;I can&apos;t fly&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>FlyWithWings</strong>：飞行方式2<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public class FlyWithWings implements FlyBehavior &#123;</span><br><span class="line">	public void fly() &#123;</span><br><span class="line">		System.out.println(&quot;I&apos;m flying!!&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>FlyRocketPowered</strong>：飞行方式3<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public class FlyRocketPowered implements FlyBehavior &#123;</span><br><span class="line">	public void fly() &#123;</span><br><span class="line">		System.out.println(&quot;I&apos;m flying with a rocket&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>QuackBehavior</strong>：封装呱呱叫的接口<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public interface QuackBehavior &#123;</span><br><span class="line">	public void quack();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>Quack</strong>：呱呱叫方式1<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public class Quack implements QuackBehavior &#123;</span><br><span class="line">	public void quack() &#123;</span><br><span class="line">		System.out.println(&quot;Quack&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>Squeak</strong>：呱呱叫方式2<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public class Squeak implements QuackBehavior &#123;</span><br><span class="line">	public void quack() &#123;</span><br><span class="line">		System.out.println(&quot;Squeak&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>MuteQuack</strong>：呱呱叫方式3<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class MuteQuack implements QuackBehavior &#123;</span><br><span class="line">	public void quack() &#123;</span><br><span class="line">		System.out.println(&quot;&lt;&lt; Silence &gt;&gt;&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>FakeQuack</strong>：呱呱叫方式4<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public class FakeQuack implements QuackBehavior &#123;</span><br><span class="line">	public void quack() &#123;</span><br><span class="line">		System.out.println(&quot;Qwak&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="5-模拟运行"><a href="#5-模拟运行" class="headerlink" title="5.模拟运行"></a>5.模拟运行</h2><p><strong>MiniDuckSimulator</strong>：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public class MiniDuckSimulator &#123;</span><br><span class="line"> </span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">      </span><br><span class="line">		MallardDuck	mallard = new MallardDuck();</span><br><span class="line">		RubberDuck	rubberDuckie = new RubberDuck();</span><br><span class="line">		DecoyDuck	decoy = new DecoyDuck(); </span><br><span class="line">		ModelDuck	model = new ModelDuck();</span><br><span class="line"></span><br><span class="line">		mallard.performQuack();</span><br><span class="line">		rubberDuckie.performQuack();</span><br><span class="line">		decoy.performQuack();</span><br><span class="line">   </span><br><span class="line">		model.performFly();	</span><br><span class="line">		model.setFlyBehavior(new FlyRocketPowered());</span><br><span class="line">		model.performFly();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Result:</p>
<blockquote>
<p>Quack<br>Squeak<br>&lt;&lt; Silence &gt;&gt;<br>I can’t fly<br>I’m flying with a rocket</p>
</blockquote>
<p><strong>MiniDuckSimulator1</strong>：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package headFirst.designPatterns.day01_strategy;</span><br><span class="line"></span><br><span class="line">public class MiniDuckSimulator1 &#123;</span><br><span class="line"> </span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">		Duck mallard = new MallardDuck();</span><br><span class="line">		mallard.performQuack();</span><br><span class="line">		mallard.performFly();</span><br><span class="line">   </span><br><span class="line">		Duck model = new ModelDuck();</span><br><span class="line">		model.performFly();</span><br><span class="line">		model.setFlyBehavior(new FlyRocketPowered());</span><br><span class="line">		model.performFly();</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Result:</p>
<blockquote>
<p>Quack<br>I’m flying!!<br>I can’t fly<br>I’m flying with a rocket</p>
</blockquote>

        </div>
        
        
        
    </div>
</div>





    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-05T07:51:02.000Z">2017-06-05</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/JavaWeb/">JavaWeb</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    23 minutes read (About 3378 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/05/JavaWeb基础之Servlet全解析/">JavaWeb基础之Servlet全解析</a>
            
        </h1>
        <div class="content">
            <blockquote>
<p>Servlet 是在服务器上运行的小程序,其主要功能在于交互式地浏览和修改数据，生成动态Web内容。狭义的Servlet是指Java语言实现的一个接口，广义的Servlet是指任何实现了这个Servlet接口的类。</p>
</blockquote>
<p>本文内容：<br><img src="http://upload-images.jianshu.io/upload_images/5990755-3f546e9130c347fd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h2 id="1-Servlet开发步骤"><a href="#1-Servlet开发步骤" class="headerlink" title="1.Servlet开发步骤"></a>1.Servlet开发步骤</h2><blockquote>
<p>学习Servlet，我们先看一下Servlet程序怎么开发，大体上可以分为五步，如下所示：</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-50d913abd71a036b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>1）编写java类，继承HttpServlet类，重写doGet和doPost方法<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class FirstServlet extends HttpServlet&#123;	</span><br><span class="line">	@Override</span><br><span class="line">	protected void doGet(HttpServletRequest req, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line">		//向浏览器输出内容</span><br><span class="line">		response.getWriter().write(&quot;this is first servlet！&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2）在web.xml文件中进行配置<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置一个servlet --&gt;</span><br><span class="line">  &lt;!-- servlet的配置 --&gt;</span><br><span class="line">  &lt;servlet&gt;</span><br><span class="line">  	&lt;!-- servlet的内部名称，自定义。尽量有意义 --&gt;</span><br><span class="line">  	&lt;servlet-name&gt;FirstServlet&lt;/servlet-name&gt;</span><br><span class="line">  	&lt;!-- servlet的类全名： 包名+简单类名 --&gt;</span><br><span class="line">  	&lt;servlet-class&gt;cn.acamy.FirstServlet&lt;/servlet-class&gt;</span><br><span class="line">  &lt;/servlet&gt;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &lt;!-- servlet的映射配置 --&gt;</span><br><span class="line">  &lt;servlet-mapping&gt;</span><br><span class="line">  	&lt;!-- servlet的内部名称，一定要和上面的内部名称保持一致！！ --&gt;</span><br><span class="line">  	&lt;servlet-name&gt;FirstServlet&lt;/servlet-name&gt;</span><br><span class="line">  	&lt;!-- servlet的映射路径（访问servlet的名称） --&gt;</span><br><span class="line">  	&lt;url-pattern&gt;/first&lt;/url-pattern&gt;</span><br><span class="line">  &lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<p>3）部署，servlet程序的class码拷贝到WEB-INF/classes目录<br>4）启动tomcat服务器<br>5）通过URL访问<br><a href="http://localhost:8080/demo/first" target="_blank" rel="noopener">http://localhost:8080/demo/first</a>  </p>
<blockquote>
<p><strong>http://</strong> :http协议<br><strong>localhost:</strong> :到本地的hosts文件中查找是否存在该域名对应的IP地址(127.0.0.1)<br><strong>8080</strong> :   找到tomcat服务器<br><strong>/demo</strong> :   在tomcat的webapps目录下找 demo的目录<br><strong>/first</strong>:    资源名称。<br>1）在demo的web.xml中查找是否有匹配的url-pattern的内容（/first）<br>2）如果找到匹配的url-pattern,则使用当前servlet-name的名称到web.xml文件中查询是否相同名称的servlet配置<br>3）如果找到，则取出对应的servlet配置信息中的servlet-class内容：<br>            字符串： cn.acamy.FirstServlet<br><strong>通过反射：</strong><br>    a）构造FirstServlet的对象<br>    b）然后调用FirstServlet里面的方法</p>
</blockquote>
<h2 id="2-本文涉及到的相关类"><a href="#2-本文涉及到的相关类" class="headerlink" title="2.本文涉及到的相关类"></a>2.本文涉及到的相关类</h2><h3 id="2-1-HttpServlet继承体系"><a href="#2-1-HttpServlet继承体系" class="headerlink" title="2.1 HttpServlet继承体系"></a>2.1 HttpServlet继承体系</h3><blockquote>
<p>我们写的Servlet程序都是要直接继续HttpServlet,由下面的类图可以看出该类有service方法的重写和重载，以及doGet,doPost…方法，继承于抽象类GenericServlet，GenericServlet实现了接口Servlet和ServletConfig，Servlet接口里面定义了init，service,destroy,getServletConfig,getServletInfo方法，ServletConfig里面定义了获取配置信息的相关方法。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-21a8d93a32764aad.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h3 id="2-2-HttpServletRequest与HttpServletResponse"><a href="#2-2-HttpServletRequest与HttpServletResponse" class="headerlink" title="2.2 HttpServletRequest与HttpServletResponse"></a>2.2 HttpServletRequest与HttpServletResponse</h3><blockquote>
<p>HttpServletRequest继承于ServletRequest,封装了Servlet程序的请求信息，HttpServletResponse继承于ServletResponse，封装了Servlet程序的响应信息。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-2146ea5d70806637.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h3 id="2-3-ServletContext"><a href="#2-3-ServletContext" class="headerlink" title="2.3 ServletContext"></a>2.3 ServletContext</h3><blockquote>
<p>ServletContext是Servlet上下文对象，封装了当前的web应用环境。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-3653c826f6535c51.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h2 id="3-Servlet的生命周期"><a href="#3-Servlet的生命周期" class="headerlink" title="3. Servlet的生命周期"></a>3. Servlet的生命周期</h2><blockquote>
<p>Servlet程序的生命周期是由tomcat服务器控制的！</p>
</blockquote>
<p>我们先来看一个Demo:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">public class LifeDemo extends HttpServlet &#123;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 1.构造方法</span><br><span class="line">	 */</span><br><span class="line">	public LifeDemo()&#123;</span><br><span class="line">		System.out.println(&quot;1.servlet对象被创建了。&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 2.init方法</span><br><span class="line">	 */</span><br><span class="line">	@Override</span><br><span class="line">	public void init(ServletConfig config) throws ServletException &#123;</span><br><span class="line">		System.out.println(&quot;2.init方法被调用&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	/**</span><br><span class="line">	 * 3.service方法</span><br><span class="line">	 */</span><br><span class="line">	@Override			</span><br><span class="line">	public void service(ServletRequest req, ServletResponse res)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line">		System.out.println(&quot;3.service方法被调用&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	/**</span><br><span class="line">	 * 4.destroy方法</span><br><span class="line">	 */</span><br><span class="line">	@Override</span><br><span class="line">	public void destroy() &#123;</span><br><span class="line">		System.out.println(&quot;4.servlet对象销毁了&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>效果如下：<br><img src="http://upload-images.jianshu.io/upload_images/5990755-080046d1f32eb33e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><strong>1. 构造方法：</strong> 创建servlet对象的时候调用。默认情况下，第一次访问servlet的时候创建servlet对象。只调用1次。证明servlet对象在tomcat是单实例的。<br><strong>2. init方法：</strong> 创建完servlet对象的时候调用。只调用1次。<br><strong>3. service方法：</strong> 每次发出请求时调用。调用n次。<br><strong>4. destroy方法：</strong> 销毁servlet对象的时候调用。停止服务器或者重新部署web应用时销毁servlet对象。 只调用1次。</p>
<p>Servlet生命周期如下图所示：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-52d4b0675b06ef9d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h2 id="4-HttpServlet的service方法源码"><a href="#4-HttpServlet的service方法源码" class="headerlink" title="4.HttpServlet的service方法源码"></a>4.HttpServlet的service方法源码</h2><blockquote>
<p>从上面的生命周期可以看出，service方法在浏览器每发送一次请求就被调用一次。但我如果要调用doGet,doPost,doHead等方法时，又该怎么实现呢？先看一下HttpServlet里面与该方法相关的源码：</p>
</blockquote>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">private static final String METHOD_DELETE = &quot;DELETE&quot;;</span><br><span class="line">private static final String METHOD_HEAD = &quot;HEAD&quot;;</span><br><span class="line">private static final String METHOD_GET = &quot;GET&quot;;</span><br><span class="line">   private static final String METHOD_OPTIONS = &quot;OPTIONS&quot;;</span><br><span class="line">   private static final String METHOD_POST = &quot;POST&quot;;</span><br><span class="line">   private static final String METHOD_PUT = &quot;PUT&quot;;</span><br><span class="line">   private static final String METHOD_TRACE = &quot;TRACE&quot;;</span><br><span class="line"></span><br><span class="line">   //该方法是重写Servlet接口中的方法，可以看到先把ServletRequest和</span><br><span class="line">   //ServletResponse转化为其子类HttpServletRequest，HttpServletResponse</span><br><span class="line">   //然后调用重载的service(HttpServletRequest req, HttpServletResponse resp)</span><br><span class="line">   @Override</span><br><span class="line">   public void service(ServletRequest req, ServletResponse res)</span><br><span class="line">       throws ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">       HttpServletRequest  request;</span><br><span class="line">       HttpServletResponse response;</span><br><span class="line"></span><br><span class="line">       try &#123;</span><br><span class="line">           request = (HttpServletRequest) req;</span><br><span class="line">           response = (HttpServletResponse) res;</span><br><span class="line">       &#125; catch (ClassCastException e) &#123;</span><br><span class="line">           throw new ServletException(&quot;non-HTTP request or response&quot;);</span><br><span class="line">       &#125;</span><br><span class="line">       service(request, response);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   //注意这个方法是上面service方法的重载，并且是protected面不是public修饰符修</span><br><span class="line">   //饰,说明该方法只能被自身或子类来调用。</span><br><span class="line">   protected void service(HttpServletRequest req, HttpServletResponse resp)</span><br><span class="line">       throws ServletException, IOException &#123;</span><br><span class="line">      </span><br><span class="line">       //首先得到方法名</span><br><span class="line">       String method = req.getMethod();</span><br><span class="line">       </span><br><span class="line">       // 然后看该方法名与实现的哪个方法相对应，就执行哪个方法</span><br><span class="line">       // 如得到的方法名为POST,则对应到METHOD_POST，</span><br><span class="line">       // 执行doPost(req, resp);</span><br><span class="line">       if (method.equals(METHOD_GET)) &#123;</span><br><span class="line">           long lastModified = getLastModified(req);</span><br><span class="line">           if (lastModified == -1) &#123;</span><br><span class="line">               // servlet doesn&apos;t support if-modified-since, no reason</span><br><span class="line">               // to go through further expensive logic</span><br><span class="line">               doGet(req, resp);</span><br><span class="line">           &#125; else &#123;</span><br><span class="line">               long ifModifiedSince;</span><br><span class="line">               try &#123;</span><br><span class="line">                   ifModifiedSince = req.getDateHeader(HEADER_IFMODSINCE);</span><br><span class="line">               &#125; catch (IllegalArgumentException iae) &#123;</span><br><span class="line">                   // Invalid date header - proceed as if none was set</span><br><span class="line">                   ifModifiedSince = -1;</span><br><span class="line">               &#125;</span><br><span class="line">               if (ifModifiedSince &lt; (lastModified / 1000 * 1000)) &#123;</span><br><span class="line">                   // If the servlet mod time is later, call doGet()</span><br><span class="line">                   // Round down to the nearest second for a proper compare</span><br><span class="line">                   // A ifModifiedSince of -1 will always be less</span><br><span class="line">                   maybeSetLastModified(resp, lastModified);</span><br><span class="line">                   doGet(req, resp);</span><br><span class="line">               &#125; else &#123;</span><br><span class="line">                   resp.setStatus(HttpServletResponse.SC_NOT_MODIFIED);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">       &#125; else if (method.equals(METHOD_HEAD)) &#123;</span><br><span class="line">           long lastModified = getLastModified(req);</span><br><span class="line">           maybeSetLastModified(resp, lastModified);</span><br><span class="line">           doHead(req, resp);</span><br><span class="line"></span><br><span class="line">       &#125; else if (method.equals(METHOD_POST)) &#123;</span><br><span class="line">           doPost(req, resp);</span><br><span class="line"></span><br><span class="line">       &#125; else if (method.equals(METHOD_PUT)) &#123;</span><br><span class="line">           doPut(req, resp);</span><br><span class="line"></span><br><span class="line">       &#125; else if (method.equals(METHOD_DELETE)) &#123;</span><br><span class="line">           doDelete(req, resp);</span><br><span class="line"></span><br><span class="line">       &#125; else if (method.equals(METHOD_OPTIONS)) &#123;</span><br><span class="line">           doOptions(req,resp);</span><br><span class="line"></span><br><span class="line">       &#125; else if (method.equals(METHOD_TRACE)) &#123;</span><br><span class="line">           doTrace(req,resp);</span><br><span class="line"></span><br><span class="line">       &#125; else &#123;</span><br><span class="line">           //</span><br><span class="line">           // Note that this means NO servlet supports whatever</span><br><span class="line">           // method was requested, anywhere on this server.</span><br><span class="line">           //</span><br><span class="line">          //如果没有找到则说明没有该方法的实现，给出错误提示</span><br><span class="line">           String errMsg = lStrings.getString(&quot;http.method_not_implemented&quot;);</span><br><span class="line">           Object[] errArgs = new Object[1];</span><br><span class="line">           errArgs[0] = method;</span><br><span class="line">           errMsg = MessageFormat.format(errMsg, errArgs);</span><br><span class="line"></span><br><span class="line">           resp.sendError(HttpServletResponse.SC_NOT_IMPLEMENTED, errMsg);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p><strong>结论</strong>：无论我们需要调用的是GET，POST还是其它方法，我们首先通过调用service(ServletRequest req, ServletResponse res)，然后指向service(HttpServletRequest req, HttpServletResponse resp)，最终通过方法名来进行匹配，实现转向，调用想doGET或POST或其它的方法。</p>
<p>##5.Servlet的路径问题与自动加载</p>
<p>###5.1 Servlet 的映射路径<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">  	&lt;!-- servlet的内部名称，一定要和上面的内部名称保持一致！！ --&gt;</span><br><span class="line">  	&lt;servlet-name&gt;FirstServlet&lt;/servlet-name&gt;</span><br><span class="line">  	&lt;!-- servlet的映射路径（访问servlet的名称） --&gt;</span><br><span class="line">  	&lt;url-pattern&gt;/first&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>Servlet的映射路径分为精确匹配和模糊匹配</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-9d470d731c79ec6d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><strong>注意：</strong><br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1）url-pattern要么以 / 开头，要么以*开头。  例如， itcast是非法路径。</span><br><span class="line">2）不能同时使用两种模糊匹配，例如 /demo/*.do是非法路径</span><br><span class="line">3）当有输入的URL有多个servlet同时被匹配的情况下：</span><br><span class="line">3.1 精确匹配优先。（长的最像优先被匹配）</span><br><span class="line">3.2 以后缀名结尾的模糊url-pattern优先级最低！！！</span><br></pre></td></tr></table></figure></p>
<p>###5.2 Servlet 的缺省路径</p>
<blockquote>
<p>servlet的缺省路径（<url-pattern>/</url-pattern>）是在tomcat服务器内置的一个路径。该路径对应的是一个DefaultServlet（缺省Servlet）。这个缺省的Servlet的作用是用于解析web应用的静态资源文件。</p>
</blockquote>
<p>问题： URL输入<a href="http://localhost:8080/demo/index.html" target="_blank" rel="noopener">http://localhost:8080/demo/index.html</a> 如何读取文件？<br>1）到当前demo应用下的web.xml文件查找是否有匹配的url-pattern。<br>2）如果没有匹配的url-pattern，则交给tomcat的内置的DefaultServlet处理<br>3）DefaultServlet程序到demo应用的根目录下查找是存在一个名称为index.html的静态文件。<br>4）如果找到该文件，则读取该文件内容，返回给浏览器。<br>5）如果找不到该文件，则返回404错误页面。<br><strong>结论：</strong> 先找动态资源，再找静态资源。</p>
<p>###5.3 Servlet 的自动加载</p>
<blockquote>
<p>默认情况下，第一次访问servlet的时候创建servlet对象。如果servlet的构造方法或init方法中执行了比较多的逻辑代码，那么导致用户第一次访问sevrlet的时候比较慢。<br>改变servlet创建对象的时机： 提前到加载web应用的时候！<br>在servlet的配置信息中，加上一个<load-on-startup>即可！</load-on-startup></p>
</blockquote>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;LifeDemo&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;gz.itcast.c_life.LifeDemo&lt;/servlet-class&gt;</span><br><span class="line">    &lt;!-- 让servlet对象自动加载 --&gt;</span><br><span class="line">    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;  注意： 整数值越大，创建优先级越低！！</span><br><span class="line">&lt;/servlet&gt;</span><br></pre></td></tr></table></figure>
<p>自动加载效果如下图所示，可以看到Servlet在Tomcat服务器启动时就执行了构造方法和init方法：<br><img src="http://upload-images.jianshu.io/upload_images/5990755-3109a51480f8298d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h2 id="6-Servlet的有参和无参init方法"><a href="#6-Servlet的有参和无参init方法" class="headerlink" title="6. Servlet的有参和无参init方法"></a>6. Servlet的有参和无参init方法</h2><blockquote>
<p> 有参数的init方法是servlet的生命周期方法，一定会被tomcat服务器调用。如果要编写初始代码，不需要覆盖。无参数的init方法是servlet的编写初始化代码的方法。是Sun公司设计出来专门给开发者进行覆盖，然后在里面编写servlet的初始逻辑代码的方法。</p>
</blockquote>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class InitDemo extends HttpServlet &#123;</span><br><span class="line"></span><br><span class="line">	/*</span><br><span class="line">	 * @Override public void init(ServletConfig config) throws ServletException</span><br><span class="line">	 * &#123; System.out.println(&quot;有参数的init方法&quot;); &#125;</span><br><span class="line">	 */</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void init() throws ServletException &#123;</span><br><span class="line">		// System.out.println(&quot;无参数的init方法&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-Servlet的多线程并发问题"><a href="#7-Servlet的多线程并发问题" class="headerlink" title="7.Servlet的多线程并发问题"></a>7.Servlet的多线程并发问题</h2><blockquote>
<p>servlet对象在tomcat服务器是单实例多线程的。因为servlet是多线程的，所以当多个servlet的线程同时访问了servlet的共享数据，如成员变量，可能会引发线程安全问题。</p>
</blockquote>
<p>解决办法：<br>1）把使用到共享数据的代码块进行同步（使用synchronized关键字进行同步）<br>2）建议在servlet类中尽量不要使用成员变量。如果确实要使用成员，必须同步。而且尽量缩小同步代码块的范围。（哪里使用到了成员变量，就同步哪里！！），以避免因为同步而导致并发效率降低。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class TheradDemo extends HttpServlet &#123;</span><br><span class="line">	</span><br><span class="line">	int count = 1;</span><br><span class="line"></span><br><span class="line">	public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line">		response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br><span class="line">		</span><br><span class="line">		synchronized (TheradDemo.class) &#123;//锁对象必须唯一。建议使用类对象</span><br><span class="line">			response.getWriter().write(&quot;你现在是当前网站的第&quot;+count+&quot;个访客&quot;);   //线程1执行完  ， 线程2执行</span><br><span class="line">		</span><br><span class="line">		//线程1还没有执行count++</span><br><span class="line">		/*try &#123;</span><br><span class="line">			Thread.sleep(5000);</span><br><span class="line">		&#125; catch (InterruptedException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;*/</span><br><span class="line">			count++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##8.ServletConfig对象</p>
<blockquote>
<p>ServletConfig对象: 主要是用于加载servlet的初始化参数。在一个web应用可以存在多个ServletConfig对象（一个Servlet对应一个ServletConfig对象）</p>
</blockquote>
<p>###8.1 对象创建和得到<br>创建时机： 在创建完servlet对象之后，在调用init方法之前创建。<br>得到对象： 直接从有参数的init方法中得到！！！</p>
<p>###8.2 servlet的初始化参数配置<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">   &lt;servlet-name&gt;ConfigDemo&lt;/servlet-name&gt;</span><br><span class="line">   &lt;servlet-class&gt;gz.itcast.f_config.ConfigDemo&lt;/servlet-class&gt;</span><br><span class="line">   &lt;!-- 初始参数： 这些参数会在加载web应用的时候，封装到ServletConfig对象中 --&gt;</span><br><span class="line">   &lt;init-param&gt;</span><br><span class="line">   	&lt;param-name&gt;path&lt;/param-name&gt;</span><br><span class="line">   	&lt;param-value&gt;e:/b.txt&lt;/param-value&gt;</span><br><span class="line">   &lt;/init-param&gt;</span><br><span class="line"> &lt;/servlet&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong> Demo:</strong></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">public class ConfigDemo extends HttpServlet &#123;</span><br><span class="line">	/**</span><br><span class="line">	 * 以下两段代码GenericServlet已经写了，我们无需编写！！</span><br><span class="line">	 */</span><br><span class="line">	/*private ServletConfig config;*/</span><br><span class="line">	</span><br><span class="line">	/**</span><br><span class="line">	 *  1）tomcat服务器把这些参数会在加载web应用的时候，封装到ServletConfig对象中 </span><br><span class="line">	 *  2）tomcat服务器调用init方法传入ServletConfig对象</span><br><span class="line">	 */</span><br><span class="line">	/*@Override</span><br><span class="line">	public void init(ServletConfig config) throws ServletException &#123;</span><br><span class="line">		this.config = config;</span><br><span class="line">	&#125;*/</span><br><span class="line">	public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line">		/**</span><br><span class="line">		 * 读取servlet的初始参数</span><br><span class="line">		 */</span><br><span class="line">		String path = this.getServletConfig().getInitParameter(&quot;path&quot;);</span><br><span class="line"></span><br><span class="line">		File file = new File(path);</span><br><span class="line">		//读取内容</span><br><span class="line">		BufferedReader br = new BufferedReader(new FileReader(file));</span><br><span class="line">		String str = null;</span><br><span class="line">		while( (str=br.readLine())!=null )&#123;</span><br><span class="line">			System.out.println(str);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		//查询当前servlet的所有初始化参数</span><br><span class="line">		Enumeration&lt;String&gt; enums = this.getServletConfig().getInitParameterNames();</span><br><span class="line">		while(enums.hasMoreElements())&#123;</span><br><span class="line">			String paramName = enums.nextElement();</span><br><span class="line">			String paramValue = this.getServletConfig().getInitParameter(paramName);</span><br><span class="line">			System.out.println(paramName+&quot;=&quot;+paramValue);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		//得到servlet的名称</span><br><span class="line">		String servletName = this.getServletConfig().getServletName();</span><br><span class="line">		System.out.println(servletName);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9-ServletContext对象"><a href="#9-ServletContext对象" class="headerlink" title="9.ServletContext对象"></a>9.ServletContext对象</h2><blockquote>
<p>Servlet的上下文对象。表示一个当前的web应用环境。一个web应用中只有一个ServletContext对象。</p>
</blockquote>
<h3 id="9-1-对象创建和得到"><a href="#9-1-对象创建和得到" class="headerlink" title="9.1 对象创建和得到"></a>9.1 对象创建和得到</h3><p>创建时机：加载web应用时创建ServletContext对象。<br>得到对象： 从当前Servlet或者ServletConfig对象的getServletContext方法得到</p>
<p><strong> Demo:</strong><br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">public class ContextDemo extends HttpServlet &#123;</span><br><span class="line"></span><br><span class="line">	public void doGet(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws ServletException, IOException &#123;</span><br><span class="line">		// 1.得到ServletContext对象</span><br><span class="line">		// ServletContext context = this.getServletConfig().getServletContext();</span><br><span class="line">		ServletContext context = this.getServletContext(); // （推荐使用）</span><br><span class="line"></span><br><span class="line">		// 2.得到web应用路径 </span><br><span class="line">		/**</span><br><span class="line">		 * web应用路径：部署到tomcat服务器上运行的web应用名称</span><br><span class="line">		 */</span><br><span class="line">		String contextPath = context.getContextPath();</span><br><span class="line"></span><br><span class="line">		System.out.println(contextPath);</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;参数&quot; + context.getInitParameter(&quot;AAA&quot;));</span><br><span class="line"></span><br><span class="line">		Enumeration&lt;String&gt; enums = context.getInitParameterNames();</span><br><span class="line">		while (enums.hasMoreElements()) &#123;</span><br><span class="line">			String paramName = enums.nextElement();</span><br><span class="line">			String paramValue = context.getInitParameter(paramName);</span><br><span class="line">			System.out.println(paramName + &quot;=&quot; + paramValue);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		// 尝试得到ConfigDemo中的servlet参数</span><br><span class="line">		String path = this.getServletConfig().getInitParameter(&quot;path&quot;);</span><br><span class="line">		System.out.println(&quot;path=&quot; + path);</span><br><span class="line"></span><br><span class="line">		// 2.把数据保存到域对象中</span><br><span class="line">		context.setAttribute(&quot;name&quot;, &quot;eric&quot;);</span><br><span class="line"></span><br><span class="line">		// 2.从域对象中取出数据</span><br><span class="line">		// String name = (String) context.getAttribute(&quot;name&quot;);</span><br><span class="line"></span><br><span class="line">		/**</span><br><span class="line">		 * 案例：应用到请求重定向</span><br><span class="line">		 */</span><br><span class="line">		response.sendRedirect(contextPath + &quot;/index.html&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="9-2-转发与重定向"><a href="#9-2-转发与重定向" class="headerlink" title="9.2 转发与重定向"></a>9.2 转发与重定向</h2><blockquote>
<p>转发与重定向都能实现页面的跳转，但在实际应用中大不相同，比较如下;</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-58834c52aa38d6ba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><strong>注意：</strong> 如果要使用request域对象进行数据共享，只能用转发技术！！！</p>

        </div>
        
        
        
    </div>
</div>





    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-04T04:58:10.000Z">2017-06-04</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/JAVA基础系列/">JAVA基础系列</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 863 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/04/JAVA基础系列（一） 概述与相关概念/">JAVA基础系列（一） 概述与相关概念</a>
            
        </h1>
        <div class="content">
            <blockquote>
<p>万事开头难，来这个平台上已经有一段时间了，看到了很多高质量的文章，也很喜欢这种简约的风格。一直也想把自己的零散的知识体系组织起来，但苦于自己拙劣的文笔和不成流派的风格让大家笑话，直到现在才开始。可是从哪方面开始，JavaWeb?JVM？Oracle?.Net?数据结构？算法？组成原理？操作系统？…细想这些东西在自己脑海中都是半调子水平。万丈高楼平地起，还是从基础的开始，在这里和大家一起学习成长，培养写作总结的习惯。在系列文章中要尽量用多点思维导图，流程图，Demo代码来取代一些臃肿的文字.</p>
</blockquote>
<p>#####JAVA学习系列之知识体系<br>将分以下几个部分进行归纳总结</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-6d11d52e09384c29.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>###概述内容<br><img src="http://upload-images.jianshu.io/upload_images/5990755-685fdd38539cd168.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="概述内容框架.jpg"></p>
<p>####1.概念<br>  Java 是一门面向对象编程语言,是一项用于开发应用程序的技术.<br>特性：简单性，解释性，面向对象，高性能，分布式处理，多线程，健壮性，动态，结构中立，安全性，开源，跨平台。</p>
<p>####2.平台版本</p>
<ul>
<li>#####J2SE(Java 2 Platform Standard Edition)标准版<br>是为开发普通桌面和商务应用程序提供的解决方案;<br>该技术体系是其他两者的基础，可以完成一些桌面应用程序的开发</li>
<li>#####J2ME(Java 2 Platform Micro Edition)小型版<br>是为开发电子消费产品和嵌入式设备提供的解决方案</li>
<li><p>#####J2EE(Java 2 Platform Enterprise Edition)企业版<br>是为开发企业环境下的应用程序提供的一套解决方案<br>该技术体系中包含的技术如 Servlet、Jsp等，主要针对于Web应用程序开发<br>####3.跨平台性</p>
<p>只要在需要运行java应用程序的操作系统上，先安装一个Java虚拟机(JVM Java Virtual Machine)即可。由JVM来负责Java程序在该系统中的运行。实现通过Java语言编写的应用程序在不同的系统平台上都可以运行。</p>
</li>
<li>#####图解</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-3718b5573e324267.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="跨平台图解"></p>
<p>####4.工作原理</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-f6fae9e246a3850c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="javat程序执行流程"></p>
<p>####5.JRE与JDK</p>
<ul>
<li>#####JRE(Java Runtime Environment    Java运行环境)<br>包括Java虚拟机(JVM Java Virtual Machine)和Java程序所需的核心类库等，如果想要运行一个开发好的Java程序，计算机中只需要安装JRE即可。</li>
<li>#####JDK(Java Development Kit    Java开发工具包)<br>JDK是提供给Java开发人员使用的，其中包含了java的开发工具，也包括了JRE。所以安装了JDK，就不用在单独安装JRE了。<br>其中的开发工具：编译工具(javac.exe)  打包工具(jar.exe)等<br><strong>简单而言：使用JDK开发完成的java程序，交给JRE去运行。</strong></li>
</ul>
<p>####6.环境变量</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-503fbb3a654305fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="JAVA环境变量"></p>

        </div>
        
        
        
    </div>
</div>





    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-06-04T04:54:54.000Z">2017-06-04</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/JAVA基础系列/">JAVA基础系列</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    17 minutes read (About 2536 words)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/06/04/JAVA基础系列（十一）反射/">JAVA基础系列（十一）反射</a>
            
        </h1>
        <div class="content">
            <blockquote>
<p>通过class文件对象，去使用该文件中的成员变量Field，构造方法Constructor，成员方法Method。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/5990755-16d6733716114c06.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h2 id="1-获取class文件对象"><a href="#1-获取class文件对象" class="headerlink" title="1.获取class文件对象"></a>1.获取class文件对象</h2><blockquote>
<p>获取class文件对象的方式：<br>1:Object类的getClass()方法<br>2:数据类型的静态属性class<br>3:Class.forName(String className);</p>
</blockquote>
<p><strong> 注意：</strong>在开发是我们一般用第三种，因为第三种是一个字符串，而不是一个具体的类名。这样我们就可以把这样的字符串配置到配置文件中。</p>
<p><strong> Demo:辅助类Person</strong><br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">package com.hust.jianshu.reflectDemos.acamy;</span><br><span class="line"></span><br><span class="line">public class Person &#123;</span><br><span class="line">	private String name;</span><br><span class="line">	int age;</span><br><span class="line">	public String address;</span><br><span class="line"></span><br><span class="line">	public Person() &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	private Person(String name) &#123;</span><br><span class="line">		this.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	Person(String name, int age) &#123;</span><br><span class="line">		this.name = name;</span><br><span class="line">		this.age = age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Person(String name, int age, String address) &#123;</span><br><span class="line">		this.name = name;</span><br><span class="line">		this.age = age;</span><br><span class="line">		this.address = address;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void show() &#123;</span><br><span class="line">		System.out.println(&quot;show&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void method(String s) &#123;</span><br><span class="line">		System.out.println(&quot;method &quot; + s);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String getString(String s, int i) &#123;</span><br><span class="line">		return s + &quot;---&quot; + i;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	private void function() &#123;</span><br><span class="line">		System.out.println(&quot;function&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return &quot;Person [name=&quot; + name + &quot;, age=&quot; + age + &quot;, address=&quot; + address</span><br><span class="line">				+ &quot;]&quot;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong> Demo:获取class文件对象的几种方式</strong><br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class ReflectDemo &#123;</span><br><span class="line">	public static void main(String[] args) throws ClassNotFoundException &#123;</span><br><span class="line">		// 方式1</span><br><span class="line">		Person p = new Person();</span><br><span class="line">		Class c = p.getClass();</span><br><span class="line"></span><br><span class="line">		Person p2 = new Person();</span><br><span class="line">		Class c2 = p2.getClass();</span><br><span class="line"></span><br><span class="line">		System.out.println(p == p2);// false</span><br><span class="line">		System.out.println(c == c2);// true</span><br><span class="line"></span><br><span class="line">		// 方式2</span><br><span class="line">		Class c3 = Person.class;</span><br><span class="line">		// int.class;</span><br><span class="line">		// String.class;</span><br><span class="line">		System.out.println(c == c3);//true</span><br><span class="line"></span><br><span class="line">		// 方式3</span><br><span class="line">		// ClassNotFoundException</span><br><span class="line">		Class c4 = Class.forName(&quot;com.hust.jianshu.reflectDemos.acamy.Person&quot;);</span><br><span class="line">		System.out.println(c == c4);//true</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="2-获取构造方法"><a href="#2-获取构造方法" class="headerlink" title="2.获取构造方法"></a>2.获取构造方法</h2><blockquote>
<p>通过反射既可以获取公有构造方法，也可以暴力访问私有构造方法。同时可以单个获取，也可以批量获取。</p>
</blockquote>
<p><strong> Demo:通过反射获取构造方法并使用</strong><br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">public class ReflectDemo &#123;</span><br><span class="line">	public static void main(String[] args) throws Exception &#123;</span><br><span class="line">		// 获取字节码文件对象</span><br><span class="line">		Class c = Class.forName(&quot;com.hust.jianshu.reflectDemos.acamy.Person&quot;);</span><br><span class="line"></span><br><span class="line">		// 获取多个构造方法</span><br><span class="line">		// public Constructor[] getConstructors():所有公共构造方法</span><br><span class="line">		// public Constructor[] getDeclaredConstructors():所有构造方法</span><br><span class="line">		Constructor[] cons = c.getDeclaredConstructors();</span><br><span class="line">		for (Constructor con : cons) &#123;</span><br><span class="line">			System.out.println(con);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		// 获取单个构造方法</span><br><span class="line">		// 获取无参构造方法对象</span><br><span class="line">		// public Constructor&lt;T&gt; getConstructor(Class&lt;?&gt;... parameterTypes)</span><br><span class="line">		// 参数表示的是：你要获取的构造方法的构造参数个数及数据类型的class字节码文件对象</span><br><span class="line">		Constructor con = c.getConstructor();// 返回的是构造方法对象</span><br><span class="line">		// public T newInstance(Object... initargs)</span><br><span class="line">		// 使用此 Constructor 对象表示的构造方法来创建该构造方法的声明类的新实例，并用指定的初始化参数初始化该实例。</span><br><span class="line">		Object obj = con.newInstance();</span><br><span class="line">		System.out.println(obj);</span><br><span class="line"></span><br><span class="line">		// 获取带参构造方法对象</span><br><span class="line">		// public Constructor&lt;T&gt; getConstructor(Class&lt;?&gt;... parameterTypes)</span><br><span class="line">		Constructor con1 = c.getConstructor(String.class, int.class,</span><br><span class="line">				String.class);</span><br><span class="line">		// 通过带参构造方法对象创建对象</span><br><span class="line">		// public T newInstance(Object... initargs)</span><br><span class="line">		Object obj1 = con1.newInstance(&quot;林青霞&quot;, 27, &quot;北京&quot;);</span><br><span class="line">		System.out.println(obj1);</span><br><span class="line"></span><br><span class="line">		// 获取私有构造方法对象</span><br><span class="line">		// NoSuchMethodException：每个这个方法异常</span><br><span class="line">		// 原因是一开始我们使用的方法只能获取公共的，下面这种方式就可以了。</span><br><span class="line">		Constructor con2 = c.getDeclaredConstructor(String.class);</span><br><span class="line">		// 用该私有构造方法创建对象</span><br><span class="line">		// IllegalAccessException:非法的访问异常。</span><br><span class="line">		// 暴力访问</span><br><span class="line">		con2.setAccessible(true);// 值为true则指示反射的对象在使用时应该取消Java语言访问检查。</span><br><span class="line">		Object obj2 = con2.newInstance(&quot;风清扬&quot;);</span><br><span class="line">		System.out.println(obj2);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##　3.获取成员变量<br>＞通过反射可以获取所有类型的成员变量，并且在创建对象后可以对获取的成员变量设置值</p>
<p><strong> Demo:通过反射获取成员变量并使用</strong><br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">import java.lang.reflect.Constructor;</span><br><span class="line">import java.lang.reflect.Field;</span><br><span class="line">public class ReflectDemo &#123;</span><br><span class="line">	public static void main(String[] args) throws Exception &#123;</span><br><span class="line">		// 获取字节码文件对象</span><br><span class="line">		Class c = Class.forName(&quot;com.hust.jianshu.reflectDemos.acamy.Person&quot;);</span><br><span class="line"></span><br><span class="line">		// 获取多个的成员变量</span><br><span class="line">		// Field[] fields = c.getFields();所有公共成员变量</span><br><span class="line">		Field[] fields = c.getDeclaredFields();// 所有成员变量</span><br><span class="line">		for (Field field : fields) &#123;</span><br><span class="line">			System.out.println(field);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		// 通过无参构造方法创建对象</span><br><span class="line">		Constructor con = c.getConstructor();</span><br><span class="line">		Object obj = con.newInstance();</span><br><span class="line">		System.out.println(obj);</span><br><span class="line"></span><br><span class="line">		// 获取单个的成员变量</span><br><span class="line">		// 获取address并对其赋值</span><br><span class="line">		Field addressField = c.getField(&quot;address&quot;);</span><br><span class="line">		// public void set(Object obj,Object value)</span><br><span class="line">		// 将指定对象变量上此 Field 对象表示的字段设置为指定的新值。</span><br><span class="line">		addressField.set(obj, &quot;北京&quot;); // 给obj对象的addressField字段设置值为&quot;北京&quot;</span><br><span class="line">		System.out.println(obj);</span><br><span class="line"></span><br><span class="line">		// 获取name并对其赋值</span><br><span class="line">		// NoSuchFieldException</span><br><span class="line">		Field nameField = c.getDeclaredField(&quot;name&quot;);</span><br><span class="line">		// IllegalAccessException</span><br><span class="line">		nameField.setAccessible(true);</span><br><span class="line">		nameField.set(obj, &quot;林青霞&quot;);</span><br><span class="line">		System.out.println(obj);</span><br><span class="line"></span><br><span class="line">		// 获取age并对其赋值</span><br><span class="line">		Field ageField = c.getDeclaredField(&quot;age&quot;);</span><br><span class="line">		ageField.setAccessible(true);</span><br><span class="line">		ageField.set(obj, 27);</span><br><span class="line">		System.out.println(obj);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="4-获取成员方法"><a href="#4-获取成员方法" class="headerlink" title="4.获取成员方法"></a>4.获取成员方法</h2><blockquote>
<p>通过反射可以获取对象的所有类型成员变量，并调用</p>
</blockquote>
<p><strong> Demo:通过反射获取成员方法并使用</strong><br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">import java.lang.reflect.Constructor;</span><br><span class="line">import java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line">public class ReflectDemo &#123;</span><br><span class="line">	public static void main(String[] args) throws Exception &#123;</span><br><span class="line">		// 获取字节码文件对象</span><br><span class="line">		Class c = Class.forName(&quot;com.hust.jianshu.reflectDemos.acamy.Person&quot;);</span><br><span class="line"></span><br><span class="line">		// 获取所有的方法</span><br><span class="line">		// Method[] methods = c.getMethods(); // 获取自己的包括父亲的公共方法</span><br><span class="line">		Method[] methods = c.getDeclaredMethods(); // 获取自己的所有的方法</span><br><span class="line">		for (Method method : methods) &#123;</span><br><span class="line">			System.out.println(method);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		Constructor con = c.getConstructor();</span><br><span class="line">		Object obj = con.newInstance();		</span><br><span class="line"></span><br><span class="line">		// 获取单个方法并使用</span><br><span class="line">		// public void show()</span><br><span class="line">		// public Method getMethod(String name,Class&lt;?&gt;... parameterTypes)</span><br><span class="line">		// 第一个参数表示的方法名，第二个参数表示的是方法的参数的class类型</span><br><span class="line">		Method m1 = c.getMethod(&quot;show&quot;);</span><br><span class="line">		// public Object invoke(Object obj,Object... args)</span><br><span class="line">		// 返回值是Object接收,第一个参数表示对象是谁，第二参数表示调用该方法的实际参数</span><br><span class="line">		m1.invoke(obj); // 调用obj对象的m1方法</span><br><span class="line"></span><br><span class="line">		System.out.println(&quot;----------&quot;);</span><br><span class="line">		// public void method(String s)</span><br><span class="line">		Method m2 = c.getMethod(&quot;method&quot;, String.class);</span><br><span class="line">		m2.invoke(obj, &quot;hello&quot;);</span><br><span class="line">		System.out.println(&quot;----------&quot;);</span><br><span class="line"></span><br><span class="line">		// public String getString(String s, int i)</span><br><span class="line">		Method m3 = c.getMethod(&quot;getString&quot;, String.class, int.class);</span><br><span class="line">		Object objString = m3.invoke(obj, &quot;hello&quot;, 100);</span><br><span class="line">		System.out.println(objString);</span><br><span class="line">		// String s = (String)m3.invoke(obj, &quot;hello&quot;,100);</span><br><span class="line">		// System.out.println(s);</span><br><span class="line">		System.out.println(&quot;----------&quot;);</span><br><span class="line"></span><br><span class="line">		// private void function()</span><br><span class="line">		Method m4 = c.getDeclaredMethod(&quot;function&quot;);</span><br><span class="line">		m4.setAccessible(true);</span><br><span class="line">		m4.invoke(obj);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##5.反射应用举例</p>
<h3 id="5-1-通过反射越过泛型检查"><a href="#5-1-通过反射越过泛型检查" class="headerlink" title="5.1 通过反射越过泛型检查"></a>5.1 通过反射越过泛型检查</h3><blockquote>
<p>集合里面的泛型是给编绎器看的，在编绎成字节码后已经去掉了该类型，变成时论的Object类型，可以通过反编绎工具验证一下。正是由于集合里面的泛型有这种机制，我们才可以利用反射得到字节码文件，越过泛型检查</p>
</blockquote>
<p><strong> Demo:</strong>在ArrayList<integer>集合中添加一个字符串数据<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import java.lang.reflect.InvocationTargetException;</span><br><span class="line">import java.lang.reflect.Method;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">public class ArrayListDemo &#123;</span><br><span class="line">	public static void main(String[] args) throws NoSuchMethodException,</span><br><span class="line">			SecurityException, IllegalAccessException,</span><br><span class="line">			IllegalArgumentException, InvocationTargetException &#123;</span><br><span class="line">		// 创建集合对象</span><br><span class="line">		ArrayList&lt;Integer&gt; array = new ArrayList&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line">		// array.add(&quot;hello&quot;);</span><br><span class="line">		array.add(10);</span><br><span class="line"></span><br><span class="line">		Class c = array.getClass(); // 集合ArrayList的class文件对象</span><br><span class="line">		Method m = c.getMethod(&quot;add&quot;, Object.class);</span><br><span class="line"></span><br><span class="line">		m.invoke(array, &quot;hello&quot;); // 调用array的add方法，传入的值是hello</span><br><span class="line">		m.invoke(array, &quot;world&quot;);</span><br><span class="line">		m.invoke(array, &quot;java&quot;);</span><br><span class="line"></span><br><span class="line">		System.out.println(array);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></integer></p>
<h3 id="5-2-反射工具类"><a href="#5-2-反射工具类" class="headerlink" title="5.2 反射工具类"></a>5.2 反射工具类</h3><p><strong> Demo: 反射工具类</strong><br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">import java.lang.reflect.Field;</span><br><span class="line"></span><br><span class="line">public class ToolDemo &#123;</span><br><span class="line">	public static void main(String[] args) throws NoSuchFieldException,</span><br><span class="line">			SecurityException, IllegalArgumentException, IllegalAccessException &#123;</span><br><span class="line">		Person p = new Person();</span><br><span class="line">		Tool t = new Tool();</span><br><span class="line">		t.setProperty(p, &quot;name&quot;, &quot;林青霞&quot;);</span><br><span class="line">		t.setProperty(p, &quot;age&quot;, 27);</span><br><span class="line">		System.out.println(p);</span><br><span class="line">		System.out.println(&quot;-----------&quot;);</span><br><span class="line"></span><br><span class="line">		Dog d = new Dog();</span><br><span class="line"></span><br><span class="line">		t.setProperty(d, &quot;sex&quot;, &apos;男&apos;);</span><br><span class="line">		t.setProperty(d, &quot;price&quot;, 12.34f);</span><br><span class="line"></span><br><span class="line">		System.out.println(d);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Tool &#123;</span><br><span class="line">	public void setProperty(Object obj, String propertyName, Object value)</span><br><span class="line">			throws NoSuchFieldException, SecurityException,</span><br><span class="line">			IllegalArgumentException, IllegalAccessException &#123;</span><br><span class="line">		// 根据对象获取字节码文件对象</span><br><span class="line">		Class c = obj.getClass();</span><br><span class="line">		// 获取该对象的propertyName成员变量</span><br><span class="line">		Field field = c.getDeclaredField(propertyName);</span><br><span class="line">		// 取消访问检查</span><br><span class="line">		field.setAccessible(true);</span><br><span class="line">		// 给对象的成员变量赋值为指定的值</span><br><span class="line">		field.set(obj, value);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Dog &#123;</span><br><span class="line">	char sex;</span><br><span class="line">	float price;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return sex + &quot;---&quot; + price;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Person &#123;</span><br><span class="line">	private String name;</span><br><span class="line">	public int age;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return name + &quot;---&quot; + age;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="6-动态代理"><a href="#6-动态代理" class="headerlink" title="6.动态代理"></a>6.动态代理</h2><blockquote>
<p><strong>代理：</strong>本来应该自己做的事情，却请了别人来做，被请的人就是代理对象。<br>举例：春季回家买票让人代买<br><strong>动态代理：</strong>在程序运行过程中产生的这个对象,动态代理其实就是通过反射来生成一个代理</p>
</blockquote>
<p><strong> Demo:反射实现动态代理类</strong><br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">import java.lang.reflect.InvocationHandler;</span><br><span class="line">import java.lang.reflect.Method;</span><br><span class="line">import java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line">public class Test &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		UserDao ud = new UserDaoImpl();</span><br><span class="line">		System.out.println(ud.getClass().getName());// ...UserDaoImpl</span><br><span class="line">		ud.add();</span><br><span class="line">		ud.delete();</span><br><span class="line">		ud.update();</span><br><span class="line">		ud.find();</span><br><span class="line">		System.out.println(&quot;-----------&quot;);</span><br><span class="line">		// 我们要创建一个动态代理对象</span><br><span class="line">		// Proxy类中有一个方法可以创建动态代理对象</span><br><span class="line"></span><br><span class="line">		// 我准备对ud对象做一个代理对象</span><br><span class="line">		MyInvocationHandler handler = new MyInvocationHandler(ud);</span><br><span class="line"></span><br><span class="line">		// public static Object newProxyInstance(ClassLoader loader,Class&lt;?&gt;[]</span><br><span class="line">		// interfaces,InvocationHandler h)</span><br><span class="line">		// ClassLoader对象，定义了由哪个ClassLoader对象来对生成的代理对象进行加载</span><br><span class="line">		// Interface对象的数组，表示的是我将要给我需要代理的对象提供一组什么接口，如果我提供了一组接口给它，那么这个代理对象就宣称实现了该接口(多态)，这样我就能调用这组接口中的方法了</span><br><span class="line">		// InvocationHandler对象，表示的是当我这个动态代理对象在调用方法的时候，会关联到哪一个InvocationHandler对象上</span><br><span class="line"></span><br><span class="line">		UserDao proxy = (UserDao) Proxy.newProxyInstance(ud.getClass()</span><br><span class="line">				.getClassLoader(), ud.getClass().getInterfaces(), handler);</span><br><span class="line"></span><br><span class="line">		// 创建的代理对象是在jvm运行时动态生成的一个对象，它并不是我们的InvocationHandler类型，</span><br><span class="line">		// 也不是我们定义的那组接口的类型，而是在运行是动态生成的一个对象，并且命名方式都是这样的形式，</span><br><span class="line">		// 以$开头，proxy为中，最后一个数字表示对象的标号。</span><br><span class="line">		System.out.println(proxy.getClass().getName());// ...$Proxy0</span><br><span class="line"></span><br><span class="line">		proxy.add();</span><br><span class="line">		proxy.delete();</span><br><span class="line">		proxy.update();</span><br><span class="line">		proxy.find();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 每一个动态代理类都必须要实现InvocationHandler这个接口，</span><br><span class="line">// 并且每个代理类的实例都关联到了一个handler，</span><br><span class="line">// 当我们通过代理对象调用一个方法的时候，</span><br><span class="line">// 这个方法的调用就会被转发为由InvocationHandler这个接口的invoke 方法来进行调用。</span><br><span class="line">class MyInvocationHandler implements InvocationHandler &#123;</span><br><span class="line">	private Object target; // 目标对象</span><br><span class="line"></span><br><span class="line">	public MyInvocationHandler(Object target) &#123;</span><br><span class="line">		this.target = target;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// proxy:代表动态代理对象</span><br><span class="line">	// method:代表正在执行的方法</span><br><span class="line">	// args:代表调用目标方法时传入的实参</span><br><span class="line">	@Override</span><br><span class="line">	public Object invoke(Object proxy, Method method, Object[] args)</span><br><span class="line">			throws Throwable &#123;</span><br><span class="line">		System.out.println(&quot;权限校验&quot;);</span><br><span class="line">		Object result = method.invoke(target, args);</span><br><span class="line">		System.out.println(&quot;日志记录&quot;);</span><br><span class="line">		return result; // 返回的是代理对象</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class UserDaoImpl implements UserDao &#123;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void add() &#123;</span><br><span class="line">		System.out.println(&quot;添加功能&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void delete() &#123;</span><br><span class="line">		System.out.println(&quot;删除功能&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void update() &#123;</span><br><span class="line">		System.out.println(&quot;修改功能&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void find() &#123;</span><br><span class="line">		System.out.println(&quot;查找功能&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface UserDao &#123;</span><br><span class="line">	public abstract void add();</span><br><span class="line"></span><br><span class="line">	public abstract void delete();</span><br><span class="line"></span><br><span class="line">	public abstract void update();</span><br><span class="line"></span><br><span class="line">	public abstract void find();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

        </div>
        
        
        
    </div>
</div>






    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous">
            <a class="is-flex-grow has-text-black-ter" href="/page/6/">Previous</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/page/8/">Next</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link has-text-black-ter" href="/">1</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/6/">6</a></li>
            
            <li><a class="pagination-link is-current" href="/page/7/">7</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/8/">8</a></li>
            
        </ul>
    </nav>
</div>
</div>
                



<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    <img class="image is-128x128 has-mb-6" src="/images/avatar.png">
                    
                    <p class="is-size-4 is-block">
                        Acamy
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Stay Hungry, Stay foolish
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>HangZhou China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <p class="title has-text-weight-normal">
                        79
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <p class="title has-text-weight-normal">
                        19
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <p class="title has-text-weight-normal">
                        2
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="http://github.com/Acamy">
                Follow</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Github" href="http://github.com/Acamy">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Facebook" href="http://facebook.com">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Twitter" href="http://twitter.com">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Dribbble" href="http://dribbble.com">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">https://hexo.io</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/ppoffice" target="_blank">
                    <span class="level-left">
                        <span class="level-item">PPOffice</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">https://github.com/ppoffice</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/ElasticSearch/">
            <span class="level-start">
                <span class="level-item">ElasticSearch</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Git/">
            <span class="level-start">
                <span class="level-item">Git</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Hadoop/">
            <span class="level-start">
                <span class="level-item">Hadoop</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JAVA基础系列/">
            <span class="level-start">
                <span class="level-item">JAVA基础系列</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">11</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JVM/">
            <span class="level-start">
                <span class="level-item">JVM</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JavaWeb/">
            <span class="level-start">
                <span class="level-item">JavaWeb</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">8</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JavaWeb框架/">
            <span class="level-start">
                <span class="level-item">JavaWeb框架</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">12</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Oracle/">
            <span class="level-start">
                <span class="level-item">Oracle</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Python/">
            <span class="level-start">
                <span class="level-item">Python</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">8</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/SpringBoot2-0/">
            <span class="level-start">
                <span class="level-item">SpringBoot2.0</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/flowable/">
            <span class="level-start">
                <span class="level-item">flowable</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/在线编程/">
            <span class="level-start">
                <span class="level-item">在线编程</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/数据结构与算法/">
            <span class="level-start">
                <span class="level-item">数据结构与算法</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/源码/">
            <span class="level-start">
                <span class="level-item">源码</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/编程/">
            <span class="level-start">
                <span class="level-item">编程</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/编程/java/">
            <span class="level-start">
                <span class="level-item">java</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/计算机网络/">
            <span class="level-start">
                <span class="level-item">计算机网络</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/设计模式/">
            <span class="level-start">
                <span class="level-item">设计模式</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/随笔/">
            <span class="level-start">
                <span class="level-item">随笔</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">12</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/优化/" style="font-size: 10px;">优化</a> <a href="/tags/线程池/" style="font-size: 10px;">线程池</a>
    </div>
</div>

    
    
        <div class="card card-transparent is-hidden-widescreen">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2018/11/03/采用线程池处理异步任务并获取最终结果/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://blog.zhangruipeng.me/hexo-theme-icarus/gallery/thumbnails/plant.jpg" alt="采用线程池处理异步任务并获取最终结果">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T15:44:39.000Z">2018-11-03</time></div>
                    <a href="/2018/11/03/采用线程池处理异步任务并获取最终结果/" class="has-link-black-ter is-size-6">采用线程池处理异步任务并获取最终结果</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/编程/">编程</a> / <a class="has-link-grey -link" href="/categories/编程/java/">java</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/10/21/记一次不太成功的频繁full gc排查过程/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="记一次不太成功的频繁full gc排查过程">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-10-21T14:00:49.000Z">2018-10-21</time></div>
                    <a href="/2018/10/21/记一次不太成功的频繁full gc排查过程/" class="has-link-black-ter is-size-6">记一次不太成功的频繁full gc排查过程</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/JVM/">JVM</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/10/19/mac下编译OpenJDK10/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="mac下编译OpenJDK10">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-10-19T12:21:37.000Z">2018-10-19</time></div>
                    <a href="/2018/10/19/mac下编译OpenJDK10/" class="has-link-black-ter is-size-6">mac下编译OpenJDK10</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/JVM/">JVM</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/10/14/AWS V4签名认证(Java实现)/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="AWS V4签名认证(Java实现)">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-10-14T05:00:50.000Z">2018-10-14</time></div>
                    <a href="/2018/10/14/AWS V4签名认证(Java实现)/" class="has-link-black-ter is-size-6">AWS V4签名认证(Java实现)</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/随笔/">随笔</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/10/10/git常用命令/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="git常用命令">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-10-10T03:46:23.000Z">2018-10-10</time></div>
                    <a href="/2018/10/10/git常用命令/" class="has-link-black-ter is-size-6">git常用命令</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Git/">Git</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">June 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">36</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <ul class="menu-list">
                
                <li>
                    <a class="level is-marginless" href="/tags/优化/">
                        <span class="level-start">
                            <span class="level-item">优化</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/线程池/">
                        <span class="level-start">
                            <span class="level-item">线程池</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                



<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2018/11/03/采用线程池处理异步任务并获取最终结果/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://blog.zhangruipeng.me/hexo-theme-icarus/gallery/thumbnails/plant.jpg" alt="采用线程池处理异步任务并获取最终结果">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T15:44:39.000Z">2018-11-03</time></div>
                    <a href="/2018/11/03/采用线程池处理异步任务并获取最终结果/" class="has-link-black-ter is-size-6">采用线程池处理异步任务并获取最终结果</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/编程/">编程</a> / <a class="has-link-grey -link" href="/categories/编程/java/">java</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/10/21/记一次不太成功的频繁full gc排查过程/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="记一次不太成功的频繁full gc排查过程">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-10-21T14:00:49.000Z">2018-10-21</time></div>
                    <a href="/2018/10/21/记一次不太成功的频繁full gc排查过程/" class="has-link-black-ter is-size-6">记一次不太成功的频繁full gc排查过程</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/JVM/">JVM</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/10/19/mac下编译OpenJDK10/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="mac下编译OpenJDK10">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-10-19T12:21:37.000Z">2018-10-19</time></div>
                    <a href="/2018/10/19/mac下编译OpenJDK10/" class="has-link-black-ter is-size-6">mac下编译OpenJDK10</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/JVM/">JVM</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/10/14/AWS V4签名认证(Java实现)/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="AWS V4签名认证(Java实现)">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-10-14T05:00:50.000Z">2018-10-14</time></div>
                    <a href="/2018/10/14/AWS V4签名认证(Java实现)/" class="has-link-black-ter is-size-6">AWS V4签名认证(Java实现)</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/随笔/">随笔</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/10/10/git常用命令/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="git常用命令">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-10-10T03:46:23.000Z">2018-10-10</time></div>
                    <a href="/2018/10/10/git常用命令/" class="has-link-black-ter is-size-6">git常用命令</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Git/">Git</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">October 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">June 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">36</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <ul class="menu-list">
                
                <li>
                    <a class="level is-marginless" href="/tags/优化/">
                        <span class="level-start">
                            <span class="level-item">优化</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/线程池/">
                        <span class="level-start">
                            <span class="level-item">线程池</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2018 John Doe&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-icarus">Icarus</a>
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="http://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>
    <script>
        (function ($) {
            $(document).ready(function () {
                if (typeof($.fn.lightGallery) === 'function') {
                    $('.article').lightGallery({ selector: '.gallery-item' });
                }
                if (typeof($.fn.justifiedGallery) === 'function') {
                    $('.justified-gallery').justifiedGallery();
                }
            });
        })(jQuery);
    </script>
    

    
    
    
    <div id="outdated">
        <h6>Your browser is out-of-date!</h6>
        <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
        <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js"></script>
    <script>
        $(document).ready(function () {
            // plugin function, place inside DOM ready function
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'flex'
            })
        });
    </script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/animejs@2.2.0/anime.js"></script>
    <script>
    function isIE() {
        var ua = window.navigator.userAgent;
        var msie = ua.indexOf('MSIE ');
        var trident = ua.indexOf('Trident/');
        return (msie > 0 || trident > 0);
    }

    $(document).ready(function () {
        $('body>.navbar,body>.section,body>.footer').css('opacity', 1);
        if (!isIE()) {
            ['.column-main > .card',
             '.column-left > .card',
             '.column-right > .card'].map(function(target) {
                anime({
                    targets: target,
                    scale: [0.8, 1],
                    opacity: [0, 1],
                    duration: 300,
                    easing: 'easeOutSine',
                    delay: function(el, i, l) {
                        return i * 100;
                    }
                })
            });

            anime({
                targets: '.navbar-main',
                translateY: [-100, 0],
                opacity: [0, 1],
                duration: 300,
                easing: 'easeOutSine'
            });
        }
    });
    </script>
    

    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<style>
#back-to-top {
    position: fixed;
    padding: 8px 0;
    transition: 0.4s ease opacity, 0.4s ease width, 0.4s ease transform, 0.4s ease border-radius;
    opacity: 0;
    line-height: 24px;
    outline: none;
    transform: translateY(120px);
}
#back-to-top.fade-in {
    opacity: 1;
}
#back-to-top.rise-up {
    transform: translateY(0);
}
</style>
<script src="/js/back-to-top.js"></script>


    
    

    
    
    
    

    
    
    


<script src="/js/main.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>